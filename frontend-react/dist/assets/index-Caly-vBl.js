(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();var ae,k,De,U,ye,Ae,Oe,He,pe,oe,se,V={},Ee=[],tt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,re=Array.isArray;function H(t,e){for(var a in e)t[a]=e[a];return t}function me(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function nt(t,e,a){var l,o,r,c={};for(r in e)r=="key"?l=e[r]:r=="ref"?o=e[r]:c[r]=e[r];if(arguments.length>2&&(c.children=arguments.length>3?ae.call(arguments,2):a),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)c[r]===void 0&&(c[r]=t.defaultProps[r]);return Z(t,c,l,o,null)}function Z(t,e,a,l,o){var r={type:t,props:e,key:a,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++De,__i:-1,__u:0};return o==null&&k.vnode!=null&&k.vnode(r),r}function q(t){return t.children}function ee(t,e){this.props=t,this.context=e}function R(t,e){if(e==null)return t.__?R(t.__,t.__i+1):null;for(var a;e<t.__k.length;e++)if((a=t.__k[e])!=null&&a.__e!=null)return a.__e;return typeof t.type=="function"?R(t):null}function Le(t){var e,a;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((a=t.__k[e])!=null&&a.__e!=null){t.__e=t.__c.base=a.__e;break}return Le(t)}}function be(t){(!t.__d&&(t.__d=!0)&&U.push(t)&&!ne.__r++||ye!=k.debounceRendering)&&((ye=k.debounceRendering)||Ae)(ne)}function ne(){for(var t,e,a,l,o,r,c,i=1;U.length;)U.length>i&&U.sort(Oe),t=U.shift(),i=U.length,t.__d&&(a=void 0,l=void 0,o=(l=(e=t).__v).__e,r=[],c=[],e.__P&&((a=H({},l)).__v=l.__v+1,k.vnode&&k.vnode(a),_e(e.__P,a,l,e.__n,e.__P.namespaceURI,32&l.__u?[o]:null,r,o??R(l),!!(32&l.__u),c),a.__v=l.__v,a.__.__k[a.__i]=a,Be(r,a,c),l.__e=l.__=null,a.__e!=o&&Le(a)));ne.__r=0}function Ie(t,e,a,l,o,r,c,i,u,d,p){var s,h,f,y,C,b,N,m=l&&l.__k||Ee,g=e.length;for(u=at(a,e,m,u,g),s=0;s<g;s++)(f=a.__k[s])!=null&&(h=f.__i==-1?V:m[f.__i]||V,f.__i=s,b=_e(t,f,h,o,r,c,i,u,d,p),y=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&he(h.ref,null,f),p.push(f.ref,f.__c||y,f)),C==null&&y!=null&&(C=y),(N=!!(4&f.__u))||h.__k===f.__k?u=Ue(f,u,t,N):typeof f.type=="function"&&b!==void 0?u=b:y&&(u=y.nextSibling),f.__u&=-7);return a.__e=C,u}function at(t,e,a,l,o){var r,c,i,u,d,p=a.length,s=p,h=0;for(t.__k=new Array(o),r=0;r<o;r++)(c=e[r])!=null&&typeof c!="boolean"&&typeof c!="function"?(typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?c=t.__k[r]=Z(null,c,null,null,null):re(c)?c=t.__k[r]=Z(q,{children:c},null,null,null):c.constructor===void 0&&c.__b>0?c=t.__k[r]=Z(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):t.__k[r]=c,u=r+h,c.__=t,c.__b=t.__b+1,i=null,(d=c.__i=rt(c,a,u,s))!=-1&&(s--,(i=a[d])&&(i.__u|=2)),i==null||i.__v==null?(d==-1&&(o>p?h--:o<p&&h++),typeof c.type!="function"&&(c.__u|=4)):d!=u&&(d==u-1?h--:d==u+1?h++:(d>u?h--:h++,c.__u|=4))):t.__k[r]=null;if(s)for(r=0;r<p;r++)(i=a[r])!=null&&(2&i.__u)==0&&(i.__e==l&&(l=R(i)),We(i,i));return l}function Ue(t,e,a,l){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=Ue(o[r],e,a,l));return e}t.__e!=e&&(l&&(e&&t.type&&!e.parentNode&&(e=R(t)),a.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function rt(t,e,a,l){var o,r,c,i=t.key,u=t.type,d=e[a],p=d!=null&&(2&d.__u)==0;if(d===null&&i==null||p&&i==d.key&&u==d.type)return a;if(l>(p?1:0)){for(o=a-1,r=a+1;o>=0||r<e.length;)if((d=e[c=o>=0?o--:r++])!=null&&(2&d.__u)==0&&i==d.key&&u==d.type)return c}return-1}function ve(t,e,a){e[0]=="-"?t.setProperty(e,a??""):t[e]=a==null?"":typeof a!="number"||tt.test(e)?a:a+"px"}function Q(t,e,a,l,o){var r,c;e:if(e=="style")if(typeof a=="string")t.style.cssText=a;else{if(typeof l=="string"&&(t.style.cssText=l=""),l)for(e in l)a&&e in a||ve(t.style,e,"");if(a)for(e in a)l&&a[e]==l[e]||ve(t.style,e,a[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(He,"$1")),c=e.toLowerCase(),e=c in t||e=="onFocusOut"||e=="onFocusIn"?c.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=a,a?l?a.u=l.u:(a.u=pe,t.addEventListener(e,r?se:oe,r)):t.removeEventListener(e,r?se:oe,r);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=a??"";break e}catch{}typeof a=="function"||(a==null||a===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&a==1?"":a))}}function xe(t){return function(e){if(this.l){var a=this.l[e.type+t];if(e.t==null)e.t=pe++;else if(e.t<a.u)return;return a(k.event?k.event(e):e)}}}function _e(t,e,a,l,o,r,c,i,u,d){var p,s,h,f,y,C,b,N,m,g,S,A,M,L,B,I,z,D=e.type;if(e.constructor!==void 0)return null;128&a.__u&&(u=!!(32&a.__u),r=[i=e.__e=a.__e]),(p=k.__b)&&p(e);e:if(typeof D=="function")try{if(N=e.props,m="prototype"in D&&D.prototype.render,g=(p=D.contextType)&&l[p.__c],S=p?g?g.props.value:p.__:l,a.__c?b=(s=e.__c=a.__c).__=s.__E:(m?e.__c=s=new D(N,S):(e.__c=s=new ee(N,S),s.constructor=D,s.render=ot),g&&g.sub(s),s.state||(s.state={}),s.__n=l,h=s.__d=!0,s.__h=[],s._sb=[]),m&&s.__s==null&&(s.__s=s.state),m&&D.getDerivedStateFromProps!=null&&(s.__s==s.state&&(s.__s=H({},s.__s)),H(s.__s,D.getDerivedStateFromProps(N,s.__s))),f=s.props,y=s.state,s.__v=e,h)m&&D.getDerivedStateFromProps==null&&s.componentWillMount!=null&&s.componentWillMount(),m&&s.componentDidMount!=null&&s.__h.push(s.componentDidMount);else{if(m&&D.getDerivedStateFromProps==null&&N!==f&&s.componentWillReceiveProps!=null&&s.componentWillReceiveProps(N,S),e.__v==a.__v||!s.__e&&s.shouldComponentUpdate!=null&&s.shouldComponentUpdate(N,s.__s,S)===!1){for(e.__v!=a.__v&&(s.props=N,s.state=s.__s,s.__d=!1),e.__e=a.__e,e.__k=a.__k,e.__k.some(function(E){E&&(E.__=e)}),A=0;A<s._sb.length;A++)s.__h.push(s._sb[A]);s._sb=[],s.__h.length&&c.push(s);break e}s.componentWillUpdate!=null&&s.componentWillUpdate(N,s.__s,S),m&&s.componentDidUpdate!=null&&s.__h.push(function(){s.componentDidUpdate(f,y,C)})}if(s.context=S,s.props=N,s.__P=t,s.__e=!1,M=k.__r,L=0,m){for(s.state=s.__s,s.__d=!1,M&&M(e),p=s.render(s.props,s.state,s.context),B=0;B<s._sb.length;B++)s.__h.push(s._sb[B]);s._sb=[]}else do s.__d=!1,M&&M(e),p=s.render(s.props,s.state,s.context),s.state=s.__s;while(s.__d&&++L<25);s.state=s.__s,s.getChildContext!=null&&(l=H(H({},l),s.getChildContext())),m&&!h&&s.getSnapshotBeforeUpdate!=null&&(C=s.getSnapshotBeforeUpdate(f,y)),I=p,p!=null&&p.type===q&&p.key==null&&(I=Fe(p.props.children)),i=Ie(t,re(I)?I:[I],e,a,l,o,r,c,i,u,d),s.base=e.__e,e.__u&=-161,s.__h.length&&c.push(s),b&&(s.__E=s.__=null)}catch(E){if(e.__v=null,u||r!=null)if(E.then){for(e.__u|=u?160:128;i&&i.nodeType==8&&i.nextSibling;)i=i.nextSibling;r[r.indexOf(i)]=null,e.__e=i}else{for(z=r.length;z--;)me(r[z]);ce(e)}else e.__e=a.__e,e.__k=a.__k,E.then||ce(e);k.__e(E,e,a)}else r==null&&e.__v==a.__v?(e.__k=a.__k,e.__e=a.__e):i=e.__e=lt(a.__e,e,a,l,o,r,c,u,d);return(p=k.diffed)&&p(e),128&e.__u?void 0:i}function ce(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(ce)}function Be(t,e,a){for(var l=0;l<a.length;l++)he(a[l],a[++l],a[++l]);k.__c&&k.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(r){r.call(o)})}catch(r){k.__e(r,o.__v)}})}function Fe(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:re(t)?t.map(Fe):H({},t)}function lt(t,e,a,l,o,r,c,i,u){var d,p,s,h,f,y,C,b=a.props||V,N=e.props,m=e.type;if(m=="svg"?o="http://www.w3.org/2000/svg":m=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),r!=null){for(d=0;d<r.length;d++)if((f=r[d])&&"setAttribute"in f==!!m&&(m?f.localName==m:f.nodeType==3)){t=f,r[d]=null;break}}if(t==null){if(m==null)return document.createTextNode(N);t=document.createElementNS(o,m,N.is&&N),i&&(k.__m&&k.__m(e,r),i=!1),r=null}if(m==null)b===N||i&&t.data==N||(t.data=N);else{if(r=r&&ae.call(t.childNodes),!i&&r!=null)for(b={},d=0;d<t.attributes.length;d++)b[(f=t.attributes[d]).name]=f.value;for(d in b)if(f=b[d],d!="children"){if(d=="dangerouslySetInnerHTML")s=f;else if(!(d in N)){if(d=="value"&&"defaultValue"in N||d=="checked"&&"defaultChecked"in N)continue;Q(t,d,null,f,o)}}for(d in N)f=N[d],d=="children"?h=f:d=="dangerouslySetInnerHTML"?p=f:d=="value"?y=f:d=="checked"?C=f:i&&typeof f!="function"||b[d]===f||Q(t,d,f,b[d],o);if(p)i||s&&(p.__html==s.__html||p.__html==t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(s&&(t.innerHTML=""),Ie(e.type=="template"?t.content:t,re(h)?h:[h],e,a,l,m=="foreignObject"?"http://www.w3.org/1999/xhtml":o,r,c,r?r[0]:a.__k&&R(a,0),i,u),r!=null)for(d=r.length;d--;)me(r[d]);i||(d="value",m=="progress"&&y==null?t.removeAttribute("value"):y!=null&&(y!==t[d]||m=="progress"&&!y||m=="option"&&y!=b[d])&&Q(t,d,y,b[d],o),d="checked",C!=null&&C!=t[d]&&Q(t,d,C,b[d],o))}return t}function he(t,e,a){try{if(typeof t=="function"){var l=typeof t.__u=="function";l&&t.__u(),l&&e==null||(t.__u=t(e))}else t.current=e}catch(o){k.__e(o,a)}}function We(t,e,a){var l,o;if(k.unmount&&k.unmount(t),(l=t.ref)&&(l.current&&l.current!=t.__e||he(l,null,e)),(l=t.__c)!=null){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(r){k.__e(r,e)}l.base=l.__P=null}if(l=t.__k)for(o=0;o<l.length;o++)l[o]&&We(l[o],e,a||typeof t.type!="function");a||me(t.__e),t.__c=t.__=t.__e=void 0}function ot(t,e,a){return this.constructor(t,a)}function st(t,e,a){var l,o,r,c;e==document&&(e=document.documentElement),k.__&&k.__(t,e),o=(l=!1)?null:e.__k,r=[],c=[],_e(e,t=e.__k=nt(q,null,[t]),o||V,V,e.namespaceURI,o?null:e.firstChild?ae.call(e.childNodes):null,r,o?o.__e:e.firstChild,l,c),Be(r,t,c)}ae=Ee.slice,k={__e:function(t,e,a,l){for(var o,r,c;e=e.__;)if((o=e.__c)&&!o.__)try{if((r=o.constructor)&&r.getDerivedStateFromError!=null&&(o.setState(r.getDerivedStateFromError(t)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,l||{}),c=o.__d),c)return o.__E=o}catch(i){t=i}throw t}},De=0,ee.prototype.setState=function(t,e){var a;a=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=H({},this.state),typeof t=="function"&&(t=t(H({},a),this.props)),t&&H(a,t),t!=null&&this.__v&&(e&&this._sb.push(e),be(this))},ee.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),be(this))},ee.prototype.render=q,U=[],Ae=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Oe=function(t,e){return t.__v.__b-e.__v.__b},ne.__r=0,He=/(PointerCapture)$|Capture$/i,pe=0,oe=xe(!1),se=xe(!0);var ct=0;function n(t,e,a,l,o,r){e||(e={});var c,i,u=e;if("ref"in u)for(i in u={},e)i=="ref"?c=e[i]:u[i]=e[i];var d={type:t,props:u,key:a,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ct,__i:-1,__u:0,__source:o,__self:r};if(typeof t=="function"&&(c=t.defaultProps))for(i in c)u[i]===void 0&&(u[i]=c[i]);return k.vnode&&k.vnode(d),d}var G,P,le,Ne,K=0,Re=[],T=k,we=T.__b,ke=T.__r,Ce=T.diffed,Se=T.__c,Pe=T.unmount,Te=T.__;function fe(t,e){T.__h&&T.__h(P,t,K||e),K=0;var a=P.__H||(P.__H={__:[],__h:[]});return t>=a.__.length&&a.__.push({}),a.__[t]}function v(t){return K=1,it(Je,t)}function it(t,e,a){var l=fe(G++,2);if(l.t=t,!l.__c&&(l.__=[Je(void 0,e),function(i){var u=l.__N?l.__N[0]:l.__[0],d=l.t(u,i);u!==d&&(l.__N=[d,l.__[1]],l.__c.setState({}))}],l.__c=P,!P.__f)){var o=function(i,u,d){if(!l.__c.__H)return!0;var p=l.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!r||r.call(this,i,u,d);var s=l.__c.props!==i;return p.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(s=!0)}}),r&&r.call(this,i,u,d)||s};P.__f=!0;var r=P.shouldComponentUpdate,c=P.componentWillUpdate;P.componentWillUpdate=function(i,u,d){if(this.__e){var p=r;r=void 0,o(i,u,d),r=p}c&&c.call(this,i,u,d)},P.shouldComponentUpdate=o}return l.__N||l.__}function ge(t,e){var a=fe(G++,3);!T.__s&&ze(a.__H,e)&&(a.__=t,a.u=e,P.__H.__h.push(a))}function je(t){return K=5,qe(function(){return{current:t}},[])}function qe(t,e){var a=fe(G++,7);return ze(a.__H,e)&&(a.__=t(),a.__H=e,a.__h=t),a.__}function x(t,e){return K=8,qe(function(){return t},e)}function dt(){for(var t;t=Re.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(te),t.__H.__h.forEach(ie),t.__H.__h=[]}catch(e){t.__H.__h=[],T.__e(e,t.__v)}}T.__b=function(t){P=null,we&&we(t)},T.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},T.__r=function(t){ke&&ke(t),G=0;var e=(P=t.__c).__H;e&&(le===P?(e.__h=[],P.__h=[],e.__.forEach(function(a){a.__N&&(a.__=a.__N),a.u=a.__N=void 0})):(e.__h.forEach(te),e.__h.forEach(ie),e.__h=[],G=0)),le=P},T.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Re.push(e)!==1&&Ne===T.requestAnimationFrame||((Ne=T.requestAnimationFrame)||ut)(dt)),e.__H.__.forEach(function(a){a.u&&(a.__H=a.u),a.u=void 0})),le=P=null},T.__c=function(t,e){e.some(function(a){try{a.__h.forEach(te),a.__h=a.__h.filter(function(l){return!l.__||ie(l)})}catch(l){e.some(function(o){o.__h&&(o.__h=[])}),e=[],T.__e(l,a.__v)}}),Se&&Se(t,e)},T.unmount=function(t){Pe&&Pe(t);var e,a=t.__c;a&&a.__H&&(a.__H.__.forEach(function(l){try{te(l)}catch(o){e=o}}),a.__H=void 0,e&&T.__e(e,a.__v))};var $e=typeof requestAnimationFrame=="function";function ut(t){var e,a=function(){clearTimeout(l),$e&&cancelAnimationFrame(e),setTimeout(t)},l=setTimeout(a,35);$e&&(e=requestAnimationFrame(a))}function te(t){var e=P,a=t.__c;typeof a=="function"&&(t.__c=void 0,a()),P=e}function ie(t){var e=P;t.__c=t.__(),P=e}function ze(t,e){return!t||t.length!==e.length||e.some(function(a,l){return a!==t[l]})}function Je(t,e){return typeof e=="function"?e(t):e}const de="/api";async function w(t,e){return(await fetch(`${de}${t}`,{...e,headers:{"Content-Type":"application/json",...e?.headers}})).json()}function pt(){const[t,e]=v(null),[a,l]=v(!1),o=x(async()=>{l(!0);try{const i=await w("/board");e(i)}finally{l(!1)}},[]),r=x(async i=>{await w("/task",{method:"POST",body:JSON.stringify(i)}),await o()},[o]),c=x(async(i,u)=>{await w(`/task/${i}/move`,{method:"POST",body:JSON.stringify({status:u})}),await o()},[o]);return{board:t,loading:a,refresh:o,createTask:r,moveTask:c}}function mt(){const[t,e]=v([]),[a,l]=v(!1),[o,r]=v(null),c=x(async()=>{const p=await w("/chat/history");e(p.messages||[])},[]),i=x(async p=>{const s={role:"user",content:p};e(f=>[...f,s]),l(!0);const h=new AbortController;r(h);try{const C={role:"assistant",content:(await(await fetch(`${de}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:p}),signal:h.signal})).json()).response};e(b=>[...b,C])}catch(f){if(f.name==="AbortError"){const y={role:"assistant",content:"*(Stopped)*"};e(C=>[...C,y])}else{const y={role:"error",content:"Error: Could not reach Claude"};e(C=>[...C,y])}}finally{l(!1),r(null)}},[]),u=x(()=>{o&&(o.abort(),fetch(`${de}/chat/stop`,{method:"POST"}).catch(()=>{}))},[o]),d=x(async()=>{await w("/chat/history",{method:"DELETE"}),e([])},[]);return{messages:t,loading:a,loadHistory:c,sendMessage:i,stopGeneration:u,clearHistory:d}}function _t(){const[t,e]=v([]),[a,l]=v(""),o=x(async()=>{const c=await w("/projects");e(c.projects||[]);const i=c.projects?.find(u=>u.current);i&&l(i.name)},[]),r=x(async c=>{const i=await w("/projects/switch",{method:"POST",body:JSON.stringify({path:c})});return i.success&&l(i.project),i.success},[]);return{projects:t,currentProject:a,load:o,switchProject:r}}function ht(){const[t,e]=v([]),a=x(async()=>{const u=await w("/claude/mcp");e(u.servers||[])},[]),l=x(async u=>{await w("/claude/mcp",{method:"POST",body:JSON.stringify(u)}),await a()},[a]),o=x(async(u,d)=>{await w(`/claude/mcp/${u}`,{method:"PUT",body:JSON.stringify(d)}),await a()},[a]),r=x(async(u,d)=>{await w(`/claude/mcp/${u}`,{method:"DELETE",body:JSON.stringify({scope:d})}),await a()},[a]),c=x(async(u,d,p)=>{await w(`/claude/mcp/${u}/toggle`,{method:"POST",body:JSON.stringify({scope:d,enabled:p})}),await a()},[a]),i=x(async(u,d)=>{try{return await w(`/claude/mcp/${u}?scope=${d}`)}catch{return null}},[]);return{servers:t,load:a,add:l,update:o,remove:r,toggle:c,getOne:i}}function ft(){const[t,e]=v([]),a=x(async()=>{const i=await w("/claude/skills");e(i.skills||[])},[]),l=x(async i=>{await w("/claude/skills",{method:"POST",body:JSON.stringify(i)}),await a()},[a]),o=x(async i=>(await w(`/claude/skills${i}`)).content||"",[]),r=x(async(i,u)=>{await w(`/claude/skills${i}`,{method:"PUT",body:JSON.stringify({content:u})}),await a()},[a]),c=x(async i=>{await w(`/claude/skills${i}`,{method:"DELETE"}),await a()},[a]);return{skills:t,load:a,create:l,getContent:o,updateContent:r,remove:c}}function gt(){const[t,e]=v([]),a=x(async()=>{const r=await w("/claude/tools");e(r.tools||[])},[]),l=x(async(r,c)=>{await w(`/claude/tools/${r}/toggle`,{method:"POST",body:JSON.stringify({enabled:c,scope:"project"})}),await a()},[a]),o=x(async r=>{try{return await w(`/claude/tools/${r}`)}catch{return null}},[]);return{tools:t,load:a,toggle:l,getDetails:o}}function yt(){const[t,e]=v([]),a=x(async()=>{const c=await w("/claude/hooks");e(c.hooks||[])},[]),l=x(async c=>{await w("/claude/hooks",{method:"POST",body:JSON.stringify(c)}),await a()},[a]),o=x(async(c,i)=>{await w("/claude/hooks",{method:"PUT",body:JSON.stringify({old_event:c.event,old_command:c.command,old_scope:c.scope,event:i.event,command:i.command,scope:i.scope})}),await a()},[a]),r=x(async(c,i,u)=>{await w("/claude/hooks",{method:"DELETE",body:JSON.stringify({event:c,command:i,scope:u})}),await a()},[a]);return{hooks:t,load:a,add:l,update:o,remove:r}}function bt(){const[t,e]=v("main"),a=x(async()=>{const l=await w("/git/branch");e(l.branch||"main")},[]);return{branch:t,loadBranch:a}}function vt(){return{ping:x(async()=>await w("/session/ping",{method:"POST"}),[])}}function xt(){const[t,e]=v([]),[a,l]=v(!1),o=x(async()=>{l(!0);try{const s=await(await fetch("/api/manager/projects")).json();e(s.projects||[])}catch(p){console.error("Failed to load managed projects:",p)}finally{l(!1)}},[]),r=x(async(p,s)=>{const f=await(await fetch("/api/manager/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:p,git_url:s})})).json();return f.success&&await o(),f},[o]),c=x(async p=>{const h=await(await fetch(`/api/manager/projects/${p}`,{method:"DELETE"})).json();return h.success&&await o(),h},[o]),i=x(async p=>{const h=await(await fetch(`/api/manager/projects/${p}/start`,{method:"POST"})).json();return await o(),h},[o]),u=x(async p=>{const h=await(await fetch(`/api/manager/projects/${p}/stop`,{method:"POST"})).json();return await o(),h},[o]),d=x(p=>{window.open(`/project/${p}/`,"_blank")},[]);return{managedProjects:t,loading:a,loadProjects:o,createProject:r,deleteProject:c,startProject:i,stopProject:u,openProject:d}}function Nt({task:t,onClick:e,onDragStart:a}){return n("div",{className:"bg-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-600 active:bg-gray-500 transition-colors touch-manipulation",draggable:!0,onDragStart:l=>a(l,t.id),onClick:e,children:[n("div",{className:"flex items-start justify-between gap-2",children:[n("span",{className:"font-medium text-sm",children:t.name}),t.priority>50&&n("span",{className:"text-xs bg-red-500/20 text-red-400 px-1.5 py-0.5 rounded",children:"High"})]}),t.description&&n("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:t.description}),t.test_cases&&t.test_cases.length>0&&n("div",{className:"text-xs text-gray-500 mt-2",children:[t.test_cases.length," tests"]})]})}function O({isOpen:t,onClose:e,title:a,children:l}){return t?n("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:e,children:n("div",{className:"bg-gray-800 rounded-xl p-5 w-full max-w-md max-h-[90vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[n("div",{className:"flex justify-between items-start mb-4",children:[n("h3",{className:"text-lg font-semibold",children:a}),n("button",{onClick:e,className:"text-gray-500 hover:text-gray-300 p-1 -mr-1",children:"✕"})]}),l]})}):null}function wt({isOpen:t,onClose:e,children:a}){return t?n("div",{className:"fixed inset-0 bg-black/50 flex items-end justify-center z-50",onClick:e,children:n("div",{className:"bg-gray-800 rounded-t-2xl w-full max-w-lg p-4 safe-bottom",onClick:l=>l.stopPropagation(),children:[n("div",{className:"w-12 h-1 bg-gray-600 rounded-full mx-auto mb-4"}),a]})}):null}const kt=[{id:"pending",key:"todo",label:"To Do",color:"bg-gray-500"},{id:"in_progress",key:"in_progress",label:"In Progress",color:"bg-blue-500"},{id:"needs_review",key:"review",label:"Review",color:"bg-yellow-500"},{id:"passing",key:"done",label:"Done",color:"bg-green-500"}];function Ct({data:t,onMoveTask:e,onAddTask:a,onWorkOnTask:l}){const[o,r]=v(!1),[c,i]=v(null),[u,d]=v({name:"",description:"",testCases:""}),[p,s]=v(null),h=(m,g)=>{m.dataTransfer?.setData("taskId",g)},f=(m,g)=>{m.preventDefault(),s(g)},y=(m,g)=>{m.preventDefault(),s(null);const S=m.dataTransfer?.getData("taskId");S&&e(S,g)},C=m=>{m.preventDefault(),a({name:u.name,description:u.description,test_cases:u.testCases.split(`
`).filter(g=>g.trim()),priority:0}),d({name:"",description:"",testCases:""}),r(!1)},b=m=>t?.board?t.board[m]||[]:[],N=m=>b(m).length;return n("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n("div",{className:"flex-1 overflow-x-auto overflow-y-auto kanban-scroll p-4",children:n("div",{className:"flex md:grid md:grid-cols-4 gap-3 min-w-max md:min-w-0",children:kt.map(m=>n("div",{className:`w-72 md:w-auto bg-gray-800 rounded-lg p-3 flex-shrink-0 ${p===m.id?"ring-2 ring-blue-500":""}`,onDragOver:g=>f(g,m.id),onDragLeave:()=>s(null),onDrop:g=>y(g,m.id),children:[n("h2",{className:"font-semibold text-gray-300 mb-3 flex items-center gap-2 text-sm",children:[n("span",{className:`w-2.5 h-2.5 ${m.color} rounded-full`}),m.label,n("span",{className:"text-xs bg-gray-700 px-2 py-0.5 rounded-full",children:N(m.key)})]}),n("div",{className:"space-y-2 min-h-[150px]",children:b(m.key).map(g=>n(Nt,{task:g,onClick:()=>i(g),onDragStart:h},g.id))})]},m.id))})}),n("div",{className:"p-4 border-t border-gray-700 flex-shrink-0 safe-bottom",children:n("button",{onClick:()=>r(!0),className:"w-full md:w-auto px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-500 active:bg-blue-700 text-sm font-medium",children:"+ Add Task"})}),n(O,{isOpen:o,onClose:()=>r(!1),title:"Add New Task",children:n("form",{onSubmit:C,children:[n("div",{className:"space-y-4",children:[n("div",{children:[n("label",{className:"block text-sm text-gray-400 mb-1",children:"Name"}),n("input",{type:"text",value:u.name,onInput:m=>d({...u,name:m.target.value}),required:!0,className:"w-full bg-gray-700 rounded-lg px-3 py-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n("div",{children:[n("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),n("textarea",{value:u.description,onInput:m=>d({...u,description:m.target.value}),rows:3,className:"w-full bg-gray-700 rounded-lg px-3 py-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n("div",{children:[n("label",{className:"block text-sm text-gray-400 mb-1",children:"Test Cases (one per line)"}),n("textarea",{value:u.testCases,onInput:m=>d({...u,testCases:m.target.value}),rows:3,placeholder:`Test case 1
Test case 2`,className:"w-full bg-gray-700 rounded-lg px-3 py-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),n("div",{className:"flex gap-2 mt-6",children:[n("button",{type:"button",onClick:()=>r(!1),className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),n("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-500",children:"Add"})]})]})}),n(O,{isOpen:!!c,onClose:()=>i(null),title:c?.name||"",children:c&&n(q,{children:[n("div",{className:"space-y-4",children:[n("div",{children:[n("label",{className:"text-xs text-gray-500",children:"Status"}),n("p",{className:"text-sm",children:c.status})]}),c.description&&n("div",{children:[n("label",{className:"text-xs text-gray-500",children:"Description"}),n("p",{className:"text-sm",children:c.description})]}),c.test_cases&&c.test_cases.length>0&&n("div",{children:[n("label",{className:"text-xs text-gray-500",children:"Test Cases"}),n("ul",{className:"text-sm list-disc list-inside",children:c.test_cases.map((m,g)=>n("li",{children:m},g))})]})]}),n("div",{className:"flex gap-2 mt-6",children:[n("button",{onClick:()=>i(null),className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Close"}),n("button",{onClick:()=>{l(c),i(null)},className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-500",children:"Work on this"})]})]})})]})}function St({messages:t,loading:e,branch:a,onSend:l,onStop:o,onClear:r,onShowAddTask:c}){const[i,u]=v(""),[d,p]=v(!1),s=je(null),h=je(null);ge(()=>{s.current&&(s.current.scrollTop=s.current.scrollHeight)},[t]);const f=()=>{const m=h.current;m&&(m.style.height="auto",m.style.height=Math.min(m.scrollHeight,120)+"px")},y=()=>{const m=i.trim();!m||e||(l(m),u(""),h.current&&(h.current.style.height="auto"))},C=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),y())},b=m=>{l(m)},N=m=>{let g=m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return g=g.replace(/```(\w*)\n?([\s\S]*?)```/g,(S,A,M)=>`<pre class="bg-gray-900 rounded p-3 my-2 overflow-x-auto text-xs font-mono"><code>${M.trim()}</code></pre>`),g=g.replace(/`([^`]+)`/g,'<code class="bg-gray-900 px-1.5 py-0.5 rounded text-xs font-mono">$1</code>'),g=g.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),g=g.replace(/\*([^*]+)\*/g,"<em>$1</em>"),g=g.replace(/\n/g,"<br>"),g};return n("div",{className:"flex flex-col h-full",children:[n("div",{className:"bg-gray-800 rounded-xl mx-3 mt-3 p-3 flex items-center justify-between flex-shrink-0",children:[n("div",{className:"flex-1 min-w-0",children:n("p",{className:"text-sm text-gray-300 truncate",children:a})}),n("button",{onClick:()=>b("Create a PR for current changes"),className:"ml-2 px-3 py-1 text-sm font-medium hover:bg-gray-700 rounded",children:"View PR"}),n("button",{onClick:()=>p(!0),className:"ml-1 p-1.5 hover:bg-gray-700 rounded",children:n("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})]}),n("div",{ref:s,className:"flex-1 overflow-y-auto p-4 space-y-3",children:[t.length===0?n("div",{className:"text-gray-500 text-sm text-center py-8",children:"Start a conversation with Claude"}):t.map((m,g)=>n("div",{className:m.role==="user"?"bg-blue-600 rounded-lg p-3 ml-4 md:ml-8":m.role==="error"?"bg-red-600/20 text-red-400 rounded-lg p-3":"bg-gray-700 rounded-lg p-3 mr-4 md:mr-8",children:n("div",{className:"text-sm chat-content",dangerouslySetInnerHTML:{__html:N(m.content)}})},g)),e&&n("div",{className:"bg-gray-700 rounded-lg p-3 mr-4 md:mr-8",children:n("div",{className:"flex gap-1",children:[n("span",{className:"w-2 h-2 bg-gray-400 rounded-full loading-dot"}),n("span",{className:"w-2 h-2 bg-gray-400 rounded-full loading-dot"}),n("span",{className:"w-2 h-2 bg-gray-400 rounded-full loading-dot"})]})})]}),n("div",{className:"p-3 flex-shrink-0 safe-bottom",children:n("div",{className:"bg-gray-800 rounded-xl p-3",children:[n("textarea",{ref:h,value:i,onInput:m=>{u(m.target.value),f()},onKeyDown:C,placeholder:"Add feedback...",rows:1,className:"w-full bg-transparent text-base focus:outline-none resize-none overflow-hidden",style:{minHeight:"24px",maxHeight:"120px"}}),n("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-700",children:[n("div",{className:"flex items-center gap-1",children:n("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded-full text-gray-400",children:"StreetsDigital/vibes"})}),n("div",{className:"flex items-center gap-1",children:[n("button",{onClick:c,className:"p-2 hover:bg-gray-700 rounded-lg active:bg-gray-600",title:"Add task",children:n("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),n("button",{onClick:()=>b("/commit"),className:"p-2 hover:bg-gray-700 rounded-lg active:bg-gray-600",title:"Commit",children:n("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),n("button",{onClick:()=>b("Create a pull request"),className:"p-2 hover:bg-gray-700 rounded-lg active:bg-gray-600",title:"Create PR",children:n("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),e?n("button",{onClick:o,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 active:bg-red-700 ml-1",title:"Stop",children:n("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})}):n("button",{onClick:y,className:"p-2 bg-white text-gray-900 rounded-lg hover:bg-gray-200 active:bg-gray-300 ml-1",title:"Send",children:n("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:n("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"})})})]})]})]})}),n(wt,{isOpen:d,onClose:()=>p(!1),children:n("div",{className:"space-y-1",children:[n("button",{onClick:()=>{b("Summarize current tasks"),p(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg",children:"Summarize tasks"}),n("button",{onClick:()=>{b("What should I work on next?"),p(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg",children:"Suggest next task"}),n("button",{onClick:()=>{b("/verify"),p(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg",children:"Run quality checks"}),n("button",{onClick:()=>{b("Show git status"),p(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg",children:"Git status"}),n("button",{onClick:()=>{r(),p(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg text-red-400",children:"Clear chat history"}),n("button",{onClick:()=>p(!1),className:"w-full text-left px-4 py-3 text-gray-400 hover:bg-gray-700 rounded-lg",children:"Cancel"})]})})]})}function ue({checked:t,onChange:e,disabled:a}){return n("label",{className:"relative inline-flex items-center cursor-pointer",children:[n("input",{type:"checkbox",checked:t,onChange:l=>e(l.target.checked),disabled:a,className:"sr-only peer"}),n("div",{className:"w-9 h-5 bg-gray-600 peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})}function Pt(){const t=ht(),e=ft(),a=gt(),l=yt(),[o,r]=v(!1),[c,i]=v(!1),[u,d]=v(!1),[p,s]=v(null),[h,f]=v(null),[y,C]=v(null),[b,N]=v(null),[m,g]=v({name:"",command:"",args:"",scope:"project"}),[S,A]=v({name:"",description:"",trigger:"",solution:"",scope:"project"}),[M,L]=v({event:"PreToolUse",command:"",scope:"project"});ge(()=>{t.load(),e.load(),a.load(),l.load()},[]);const B=async _=>{_.preventDefault(),await t.add({name:m.name,command:m.command,args:m.args.split(" ").filter($=>$),scope:m.scope}),g({name:"",command:"",args:"",scope:"project"}),r(!1)},I=async _=>{const $=await t.getOne(_.name,_.scope);$&&s($)},z=async _=>{_.preventDefault(),p&&(await t.update(p.name,p),s(null))},D=async()=>{!p||!confirm(`Delete MCP server "${p.name}"?`)||(await t.remove(p.name,p.scope),s(null))},E=async _=>{_.preventDefault(),await e.create(S),A({name:"",description:"",trigger:"",solution:"",scope:"project"}),i(!1)},Ve=async _=>{const $=await e.getContent(_.file);f({skill:_,content:$})},Ge=async _=>{_.preventDefault(),h&&(await e.updateContent(h.skill.file,h.content),f(null))},Ke=async()=>{!h||!confirm(`Delete skill "${h.skill.name}"?`)||(await e.remove(h.skill.file),f(null))},Qe=async _=>{const $=await a.getDetails(_.name);$&&C($)},Xe=async _=>{_.preventDefault(),await l.add(M),L({event:"PreToolUse",command:"",scope:"project"}),d(!1)},Ye=_=>{N(_)},Ze=async()=>{!b||!confirm(`Delete hook "${b.event}"?`)||(await l.remove(b.event,b.command,b.scope),N(null))};return n("div",{className:"flex-1 overflow-y-auto",children:[n("div",{className:"p-4 border-b border-gray-700",children:[n("h2",{className:"font-semibold text-gray-300",children:"Claude Tools"}),n("p",{className:"text-xs text-gray-500",children:"MCP servers, skills, and settings"})]}),n(X,{title:"MCP Servers",onAdd:()=>r(!0),isEmpty:t.servers.length===0,emptyText:"No MCP servers configured",children:t.servers.map(_=>n(Me,{title:_.name,subtitle:`${_.scope} • ${_.command}`,checked:_.enabled,onToggle:$=>t.toggle(_.name,_.scope,$),onClick:()=>I(_)},`${_.scope}-${_.name}`))}),n(X,{title:"Skills",onAdd:()=>i(!0),isEmpty:e.skills.length===0,emptyText:"No skills created yet",children:e.skills.map(_=>n("div",{className:"p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700",onClick:()=>Ve(_),children:[n("div",{className:"text-sm font-medium",children:_.name}),n("div",{className:"text-xs text-gray-500",children:_.description||_.scope})]},_.file))}),n(X,{title:"Built-in Tools",isEmpty:a.tools.length===0,children:a.tools.map(_=>n(Me,{title:_.name,subtitle:_.description,checked:_.enabled,onToggle:$=>a.toggle(_.name,$),onClick:()=>Qe(_)},_.name))}),n(X,{title:"Hooks",onAdd:()=>d(!0),isEmpty:l.hooks.length===0,emptyText:"No hooks configured",children:l.hooks.map((_,$)=>n("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700",onClick:()=>Ye(_),children:[n("div",{className:"flex-1 min-w-0",children:[n("div",{className:"text-sm font-medium",children:_.event}),n("div",{className:"text-xs text-gray-500 truncate",children:[_.scope," • ",_.command]})]}),n("button",{onClick:et=>{et.stopPropagation(),l.remove(_.event,_.command,_.scope)},className:"ml-2 p-1 text-red-400 hover:text-red-300",children:n("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},$))}),n("div",{className:"p-4",children:[n("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Quick Actions"}),n("div",{className:"space-y-2",children:[n(Y,{onClick:()=>{},label:"Commit changes"}),n(Y,{onClick:()=>{},label:"Create PR"}),n(Y,{onClick:()=>{},label:"Run quality checks"}),n(Y,{onClick:()=>{},label:"Extract learnings"})]})]}),n(O,{isOpen:o,onClose:()=>r(!1),title:"Add MCP Server",children:n("form",{onSubmit:B,children:[n(J,{children:[n(j,{label:"Name",children:n("input",{type:"text",value:m.name,onInput:_=>g({...m,name:_.target.value}),required:!0,placeholder:"my-server",className:"form-input"})}),n(j,{label:"Command",children:n("input",{type:"text",value:m.command,onInput:_=>g({...m,command:_.target.value}),required:!0,placeholder:"npx",className:"form-input"})}),n(j,{label:"Arguments (space separated)",children:n("input",{type:"text",value:m.args,onInput:_=>g({...m,args:_.target.value}),placeholder:"-y @modelcontextprotocol/server-github",className:"form-input"})}),n(j,{label:"Scope",children:n("select",{value:m.scope,onChange:_=>g({...m,scope:_.target.value}),className:"form-input",children:[n("option",{value:"project",children:"Project"}),n("option",{value:"global",children:"Global"})]})})]}),n(F,{onCancel:()=>r(!1),submitLabel:"Add"})]})}),n(O,{isOpen:!!p,onClose:()=>s(null),title:"MCP Server",children:p&&n("form",{onSubmit:z,children:[n(J,{children:[n(j,{label:"Name",children:n("input",{type:"text",value:p.name,onInput:_=>s({...p,name:_.target.value}),className:"form-input"})}),n(j,{label:"Command",children:n("input",{type:"text",value:p.command,onInput:_=>s({...p,command:_.target.value}),className:"form-input"})}),n(j,{label:"Arguments",children:n("input",{type:"text",value:p.args.join(" "),onInput:_=>s({...p,args:_.target.value.split(" ").filter($=>$)}),className:"form-input"})}),n("div",{className:"flex items-center justify-between",children:[n("span",{className:"text-sm text-gray-400",children:"Enabled"}),n(ue,{checked:p.enabled,onChange:_=>s({...p,enabled:_})})]}),n("div",{className:"text-xs text-gray-500",children:["Scope: ",p.scope]})]}),n(F,{onCancel:()=>s(null),onDelete:D,submitLabel:"Save"})]})}),n(O,{isOpen:c,onClose:()=>i(!1),title:"Create Skill",children:n("form",{onSubmit:E,children:[n(J,{children:[n(j,{label:"Name",children:n("input",{type:"text",value:S.name,onInput:_=>A({...S,name:_.target.value}),required:!0,placeholder:"fix-common-error",className:"form-input"})}),n(j,{label:"Description",children:n("input",{type:"text",value:S.description,onInput:_=>A({...S,description:_.target.value}),placeholder:"What this skill does",className:"form-input"})}),n(j,{label:"Trigger (when to use)",children:n("textarea",{value:S.trigger,onInput:_=>A({...S,trigger:_.target.value}),rows:2,placeholder:"When error X occurs...",className:"form-input"})}),n(j,{label:"Solution",children:n("textarea",{value:S.solution,onInput:_=>A({...S,solution:_.target.value}),rows:4,placeholder:"Steps to fix...",className:"form-input"})})]}),n(F,{onCancel:()=>i(!1),submitLabel:"Create"})]})}),n(O,{isOpen:!!h,onClose:()=>f(null),title:h?.skill.name||"",children:h&&n("form",{onSubmit:Ge,children:[n(J,{children:[n(j,{label:"Content",children:n("textarea",{value:h.content,onInput:_=>f({...h,content:_.target.value}),rows:12,className:"form-input font-mono text-sm"})}),n("div",{className:"text-xs text-gray-500",children:["Path: ",h.skill.file]})]}),n(F,{onCancel:()=>f(null),onDelete:Ke,submitLabel:"Save"})]})}),n(O,{isOpen:!!y,onClose:()=>C(null),title:y?.name||"",children:y&&n("div",{className:"space-y-4",children:[n("div",{children:[n("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),n("p",{className:"text-sm",children:y.description})]}),n("div",{children:[n("label",{className:"block text-sm text-gray-400 mb-1",children:"Details"}),n("p",{className:"text-sm text-gray-300",children:y.details||"No additional details available."})]}),n("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[n("span",{className:"text-sm",children:"Enabled"}),n(ue,{checked:y.enabled,onChange:_=>{a.toggle(y.name,_),C({...y,enabled:_})}})]}),y.denied_in&&n("div",{className:"text-xs text-yellow-400",children:["Disabled in ",y.denied_in," settings"]}),n("button",{onClick:()=>C(null),className:"w-full px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Close"})]})}),n(O,{isOpen:u,onClose:()=>d(!1),title:"Add Hook",children:n("form",{onSubmit:Xe,children:[n(J,{children:[n(j,{label:"Event",children:n("select",{value:M.event,onChange:_=>L({...M,event:_.target.value}),className:"form-input",children:[n("option",{value:"PreToolUse",children:"PreToolUse - Before tool runs"}),n("option",{value:"PostToolUse",children:"PostToolUse - After tool runs"}),n("option",{value:"Notification",children:"Notification - On notifications"}),n("option",{value:"Stop",children:"Stop - When Claude stops"})]})}),n(j,{label:"Command",children:n("input",{type:"text",value:M.command,onInput:_=>L({...M,command:_.target.value}),required:!0,placeholder:"npm run lint",className:"form-input"})}),n(j,{label:"Scope",children:n("select",{value:M.scope,onChange:_=>L({...M,scope:_.target.value}),className:"form-input",children:[n("option",{value:"project",children:"Project"}),n("option",{value:"global",children:"Global"})]})})]}),n(F,{onCancel:()=>d(!1),submitLabel:"Add"})]})}),n(O,{isOpen:!!b,onClose:()=>N(null),title:"Hook",children:b&&n("div",{className:"space-y-4",children:[n(j,{label:"Event",children:n("p",{className:"text-sm",children:b.event})}),n(j,{label:"Command",children:n("p",{className:"text-sm font-mono bg-gray-700 p-2 rounded",children:b.command})}),n(j,{label:"Scope",children:n("p",{className:"text-sm",children:b.scope})}),n(F,{onCancel:()=>N(null),onDelete:Ze,submitLabel:""})]})})]})}function X({title:t,onAdd:e,isEmpty:a,emptyText:l,children:o}){return n("div",{className:"p-4 border-b border-gray-700",children:[n("div",{className:"flex items-center justify-between mb-3",children:[n("h3",{className:"text-sm font-medium text-gray-400",children:t}),e&&n("button",{onClick:e,className:"text-xs px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",children:"+ Add"})]}),n("div",{className:"space-y-2",children:a?n("div",{className:"text-sm text-gray-500",children:l}):o})]})}function Me({title:t,subtitle:e,checked:a,onToggle:l,onClick:o}){return n("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700",children:[n("div",{className:"flex-1 min-w-0",onClick:o,children:[n("div",{className:"text-sm font-medium truncate",children:t}),n("div",{className:"text-xs text-gray-500",children:e})]}),n("div",{onClick:r=>r.stopPropagation(),children:n(ue,{checked:a,onChange:l})})]})}function Y({onClick:t,label:e}){return n("button",{onClick:t,className:"w-full text-left px-3 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 text-sm",children:e})}function J({children:t}){return n("div",{className:"space-y-4",children:t})}function j({label:t,children:e}){return n("div",{children:[n("label",{className:"block text-sm text-gray-400 mb-1",children:t}),e]})}function F({onCancel:t,onDelete:e,submitLabel:a}){return n("div",{className:"flex gap-2 mt-6",children:[e&&n("button",{type:"button",onClick:e,className:"px-4 py-3 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30",children:"Delete"}),n("button",{type:"button",onClick:t,className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),a&&n("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-500",children:a})]})}function Tt(){const[t,e]=v("board"),[a,l]=v(!1),o=pt(),r=mt(),c=_t(),i=bt(),u=vt(),d=xt();ge(()=>{o.refresh(),r.loadHistory(),c.load(),i.loadBranch(),d.loadProjects(),p();const h=setInterval(o.refresh,1e4);return()=>clearInterval(h)},[]);const p=async()=>{(await u.ping()).summary&&e("chat")},s=h=>{e("chat"),r.sendMessage(`Help me implement: ${h.name}

Description: ${h.description||"None"}

Test cases:
${h.test_cases?.join(`
`)||"None"}`)};return n("div",{className:"bg-gray-900 text-gray-100 min-h-screen flex flex-col",children:[n("header",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3 flex-shrink-0",children:n("div",{className:"flex items-center justify-between",children:[n("div",{className:"flex items-center gap-2",children:[n("h1",{className:"text-lg font-bold text-blue-400",children:"⚡"}),n(jt,{projects:c.projects,currentProject:c.currentProject,managedProjects:d.managedProjects,onSwitch:async h=>{await c.switchProject(h),o.refresh(),r.loadHistory(),i.loadBranch()},onOpenManaged:d.openProject,onNewProject:()=>l(!0)})]}),n("div",{className:"flex items-center gap-2",children:[n("span",{className:"text-xs text-gray-400 hidden sm:inline",children:o.board?.stats?`${o.board.stats.passing}/${o.board.stats.total} complete (${o.board.stats.progress_percent}%)`:"Loading..."}),n("button",{onClick:o.refresh,className:"p-2 bg-gray-700 rounded-lg hover:bg-gray-600 active:bg-gray-500 text-sm",children:"↻"})]})]})}),n("div",{className:"md:hidden flex border-b border-gray-700 bg-gray-800 flex-shrink-0",children:[n(W,{active:t==="board",onClick:()=>e("board"),label:"Board"}),n(W,{active:t==="chat",onClick:()=>e("chat"),label:"Claude"}),n(W,{active:t==="tools",onClick:()=>e("tools"),label:"Tools"})]}),n("div",{className:"hidden md:flex border-b border-gray-700 bg-gray-800 flex-shrink-0 justify-center",children:[n(W,{active:t==="board",onClick:()=>e("board"),label:"Board"}),n(W,{active:t==="chat",onClick:()=>e("chat"),label:"Claude"}),n(W,{active:t==="tools",onClick:()=>e("tools"),label:"Tools"})]}),n("div",{className:"flex flex-1 overflow-hidden",children:[n("main",{className:`flex-1 flex flex-col overflow-hidden ${t!=="board"?"hidden":"flex"}`,children:n(Ct,{data:o.board,onMoveTask:o.moveTask,onAddTask:o.createTask,onWorkOnTask:s})}),n("aside",{className:`w-full flex-1 bg-gray-900 flex-col h-full ${t!=="chat"?"hidden":"flex"}`,children:n(St,{messages:r.messages,loading:r.loading,branch:i.branch,onSend:r.sendMessage,onStop:r.stopGeneration,onClear:r.clearHistory,onShowAddTask:()=>e("board")})}),n("aside",{className:`w-full flex-1 bg-gray-900 flex-col h-full overflow-y-auto ${t!=="tools"?"hidden":"flex"}`,children:n(Pt,{})})]}),n($t,{isOpen:a,onClose:()=>l(!1),onCreate:async(h,f)=>{const y=await d.createProject(h,f);y.success&&y.project&&d.openProject(y.project.id)}})]})}function jt({projects:t,currentProject:e,managedProjects:a,onSwitch:l,onOpenManaged:o,onNewProject:r}){const[c,i]=v(!1);return n("div",{className:"relative",children:[n("button",{onClick:()=>i(!c),className:"flex items-center gap-1 px-2 py-1 bg-gray-700 rounded-lg hover:bg-gray-600 text-sm",children:[n("span",{children:e||"vibes"}),n("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&n("div",{className:"absolute left-0 mt-1 w-64 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-50",children:n("div",{className:"py-1 max-h-80 overflow-y-auto",children:[n("div",{className:"px-3 py-1 text-xs text-gray-500 uppercase",children:"Current"}),t.map(u=>n("button",{onClick:()=>{l(u.path),i(!1)},className:`w-full text-left px-3 py-2 hover:bg-gray-700 text-sm ${u.current?"text-blue-400":""}`,children:[u.current&&n("span",{className:"mr-1",children:"●"}),u.name]},u.path)),a.length>0&&n(q,{children:[n("div",{className:"border-t border-gray-700 my-1"}),n("div",{className:"px-3 py-1 text-xs text-gray-500 uppercase",children:"Isolated Projects"}),a.map(u=>n("button",{onClick:()=>{o(u.id),i(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-700 text-sm flex items-center justify-between",children:[n("span",{children:u.name}),n("span",{className:`text-xs px-1.5 py-0.5 rounded ${u.container_status==="running"?"bg-green-600/20 text-green-400":"bg-gray-600/20 text-gray-400"}`,children:u.container_status})]},u.id))]}),n("div",{className:"border-t border-gray-700 my-1"}),n("button",{onClick:()=>{r(),i(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-700 text-sm text-blue-400 flex items-center gap-2",children:[n("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Isolated Project"]})]})})]})}function $t({isOpen:t,onClose:e,onCreate:a}){const[l,o]=v(""),[r,c]=v(""),[i,u]=v(!1),[d,p]=v(""),s=async()=>{if(!l.trim()){p("Project name is required");return}u(!0),p("");try{await a(l.trim(),r.trim()||void 0),o(""),c(""),e()}catch(h){p(h.message)}finally{u(!1)}};return t?n(O,{isOpen:t,onClose:e,title:"New Isolated Project",children:n("div",{className:"space-y-4",children:[n("p",{className:"text-sm text-gray-400",children:"Create a new project in its own isolated Docker container."}),n("div",{children:[n("label",{className:"block text-sm font-medium mb-1",children:"Project Name"}),n("input",{type:"text",value:l,onInput:h=>o(h.target.value),placeholder:"my-awesome-project",className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),n("div",{children:[n("label",{className:"block text-sm font-medium mb-1",children:"Git URL (optional)"}),n("input",{type:"text",value:r,onInput:h=>c(h.target.value),placeholder:"https://github.com/user/repo.git",className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),n("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to create a blank project"})]}),d&&n("div",{className:"text-sm text-red-400 bg-red-400/10 rounded-lg px-3 py-2",children:d}),n("div",{className:"flex gap-2 justify-end",children:[n("button",{onClick:e,className:"px-4 py-2 text-sm bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),n("button",{onClick:s,disabled:i,className:"px-4 py-2 text-sm bg-blue-600 rounded-lg hover:bg-blue-500 disabled:opacity-50",children:i?"Creating...":"Create Project"})]})]})}):null}function W({active:t,onClick:e,label:a}){return n("button",{onClick:e,className:`flex-1 py-3 text-sm font-medium text-center ${t?"tab-active text-blue-400":"text-gray-400"}`,children:a})}st(n(Tt,{}),document.getElementById("app"));
