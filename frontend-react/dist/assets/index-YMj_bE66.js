(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();var re,C,De,B,ye,Ae,Oe,He,me,oe,se,G={},Le=[],tt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ae=Array.isArray;function H(n,t){for(var r in t)n[r]=t[r];return n}function pe(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function nt(n,t,r){var a,o,l,s={};for(l in t)l=="key"?a=t[l]:l=="ref"?o=t[l]:s[l]=t[l];if(arguments.length>2&&(s.children=arguments.length>3?re.call(arguments,2):r),typeof n=="function"&&n.defaultProps!=null)for(l in n.defaultProps)s[l]===void 0&&(s[l]=n.defaultProps[l]);return Z(n,s,a,o,null)}function Z(n,t,r,a,o){var l={type:n,props:t,key:r,ref:a,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++De,__i:-1,__u:0};return o==null&&C.vnode!=null&&C.vnode(l),l}function U(n){return n.children}function ee(n,t){this.props=n,this.context=t}function q(n,t){if(t==null)return n.__?q(n.__,n.__i+1):null;for(var r;t<n.__k.length;t++)if((r=n.__k[t])!=null&&r.__e!=null)return r.__e;return typeof n.type=="function"?q(n):null}function Ee(n){var t,r;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,t=0;t<n.__k.length;t++)if((r=n.__k[t])!=null&&r.__e!=null){n.__e=n.__c.base=r.__e;break}return Ee(n)}}function be(n){(!n.__d&&(n.__d=!0)&&B.push(n)&&!ne.__r++||ye!=C.debounceRendering)&&((ye=C.debounceRendering)||Ae)(ne)}function ne(){for(var n,t,r,a,o,l,s,c=1;B.length;)B.length>c&&B.sort(Oe),n=B.shift(),c=B.length,n.__d&&(r=void 0,a=void 0,o=(a=(t=n).__v).__e,l=[],s=[],t.__P&&((r=H({},a)).__v=a.__v+1,C.vnode&&C.vnode(r),he(t.__P,r,a,t.__n,t.__P.namespaceURI,32&a.__u?[o]:null,l,o??q(a),!!(32&a.__u),s),r.__v=a.__v,r.__.__k[r.__i]=r,Ue(l,r,s),a.__e=a.__=null,r.__e!=o&&Ee(r)));ne.__r=0}function Ie(n,t,r,a,o,l,s,c,d,u,m){var i,h,f,b,w,y,x,p=a&&a.__k||Le,g=t.length;for(d=rt(r,t,p,d,g),i=0;i<g;i++)(f=r.__k[i])!=null&&(h=f.__i==-1?G:p[f.__i]||G,f.__i=i,y=he(n,f,h,o,l,s,c,d,u,m),b=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&_e(h.ref,null,f),m.push(f.ref,f.__c||b,f)),w==null&&b!=null&&(w=b),(x=!!(4&f.__u))||h.__k===f.__k?d=Be(f,d,n,x):typeof f.type=="function"&&y!==void 0?d=y:b&&(d=b.nextSibling),f.__u&=-7);return r.__e=w,d}function rt(n,t,r,a,o){var l,s,c,d,u,m=r.length,i=m,h=0;for(n.__k=new Array(o),l=0;l<o;l++)(s=t[l])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=n.__k[l]=Z(null,s,null,null,null):ae(s)?s=n.__k[l]=Z(U,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=n.__k[l]=Z(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):n.__k[l]=s,d=l+h,s.__=n,s.__b=n.__b+1,c=null,(u=s.__i=at(s,r,d,i))!=-1&&(i--,(c=r[u])&&(c.__u|=2)),c==null||c.__v==null?(u==-1&&(o>m?h--:o<m&&h++),typeof s.type!="function"&&(s.__u|=4)):u!=d&&(u==d-1?h--:u==d+1?h++:(u>d?h--:h++,s.__u|=4))):n.__k[l]=null;if(i)for(l=0;l<m;l++)(c=r[l])!=null&&(2&c.__u)==0&&(c.__e==a&&(a=q(c)),We(c,c));return a}function Be(n,t,r,a){var o,l;if(typeof n.type=="function"){for(o=n.__k,l=0;o&&l<o.length;l++)o[l]&&(o[l].__=n,t=Be(o[l],t,r,a));return t}n.__e!=t&&(a&&(t&&n.type&&!t.parentNode&&(t=q(n)),r.insertBefore(n.__e,t||null)),t=n.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function at(n,t,r,a){var o,l,s,c=n.key,d=n.type,u=t[r],m=u!=null&&(2&u.__u)==0;if(u===null&&c==null||m&&c==u.key&&d==u.type)return r;if(a>(m?1:0)){for(o=r-1,l=r+1;o>=0||l<t.length;)if((u=t[s=o>=0?o--:l++])!=null&&(2&u.__u)==0&&c==u.key&&d==u.type)return s}return-1}function ve(n,t,r){t[0]=="-"?n.setProperty(t,r??""):n[t]=r==null?"":typeof r!="number"||tt.test(t)?r:r+"px"}function Q(n,t,r,a,o){var l,s;e:if(t=="style")if(typeof r=="string")n.style.cssText=r;else{if(typeof a=="string"&&(n.style.cssText=a=""),a)for(t in a)r&&t in r||ve(n.style,t,"");if(r)for(t in r)a&&r[t]==a[t]||ve(n.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")l=t!=(t=t.replace(He,"$1")),s=t.toLowerCase(),t=s in n||t=="onFocusOut"||t=="onFocusIn"?s.slice(2):t.slice(2),n.l||(n.l={}),n.l[t+l]=r,r?a?r.u=a.u:(r.u=me,n.addEventListener(t,l?se:oe,l)):n.removeEventListener(t,l?se:oe,l);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in n)try{n[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?n.removeAttribute(t):n.setAttribute(t,t=="popover"&&r==1?"":r))}}function xe(n){return function(t){if(this.l){var r=this.l[t.type+n];if(t.t==null)t.t=me++;else if(t.t<r.u)return;return r(C.event?C.event(t):t)}}}function he(n,t,r,a,o,l,s,c,d,u){var m,i,h,f,b,w,y,x,p,g,S,A,M,E,F,I,z,D=t.type;if(t.constructor!==void 0)return null;128&r.__u&&(d=!!(32&r.__u),l=[c=t.__e=r.__e]),(m=C.__b)&&m(t);e:if(typeof D=="function")try{if(x=t.props,p="prototype"in D&&D.prototype.render,g=(m=D.contextType)&&a[m.__c],S=m?g?g.props.value:m.__:a,r.__c?y=(i=t.__c=r.__c).__=i.__E:(p?t.__c=i=new D(x,S):(t.__c=i=new ee(x,S),i.constructor=D,i.render=ot),g&&g.sub(i),i.state||(i.state={}),i.__n=a,h=i.__d=!0,i.__h=[],i._sb=[]),p&&i.__s==null&&(i.__s=i.state),p&&D.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=H({},i.__s)),H(i.__s,D.getDerivedStateFromProps(x,i.__s))),f=i.props,b=i.state,i.__v=t,h)p&&D.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),p&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(p&&D.getDerivedStateFromProps==null&&x!==f&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(x,S),t.__v==r.__v||!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(x,i.__s,S)===!1){for(t.__v!=r.__v&&(i.props=x,i.state=i.__s,i.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(L){L&&(L.__=t)}),A=0;A<i._sb.length;A++)i.__h.push(i._sb[A]);i._sb=[],i.__h.length&&s.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(x,i.__s,S),p&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(f,b,w)})}if(i.context=S,i.props=x,i.__P=n,i.__e=!1,M=C.__r,E=0,p){for(i.state=i.__s,i.__d=!1,M&&M(t),m=i.render(i.props,i.state,i.context),F=0;F<i._sb.length;F++)i.__h.push(i._sb[F]);i._sb=[]}else do i.__d=!1,M&&M(t),m=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++E<25);i.state=i.__s,i.getChildContext!=null&&(a=H(H({},a),i.getChildContext())),p&&!h&&i.getSnapshotBeforeUpdate!=null&&(w=i.getSnapshotBeforeUpdate(f,b)),I=m,m!=null&&m.type===U&&m.key==null&&(I=Fe(m.props.children)),c=Ie(n,ae(I)?I:[I],t,r,a,o,l,s,c,d,u),i.base=t.__e,t.__u&=-161,i.__h.length&&s.push(i),y&&(i.__E=i.__=null)}catch(L){if(t.__v=null,d||l!=null)if(L.then){for(t.__u|=d?160:128;c&&c.nodeType==8&&c.nextSibling;)c=c.nextSibling;l[l.indexOf(c)]=null,t.__e=c}else{for(z=l.length;z--;)pe(l[z]);ce(t)}else t.__e=r.__e,t.__k=r.__k,L.then||ce(t);C.__e(L,t,r)}else l==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):c=t.__e=lt(r.__e,t,r,a,o,l,s,d,u);return(m=C.diffed)&&m(t),128&t.__u?void 0:c}function ce(n){n&&n.__c&&(n.__c.__e=!0),n&&n.__k&&n.__k.forEach(ce)}function Ue(n,t,r){for(var a=0;a<r.length;a++)_e(r[a],r[++a],r[++a]);C.__c&&C.__c(t,n),n.some(function(o){try{n=o.__h,o.__h=[],n.some(function(l){l.call(o)})}catch(l){C.__e(l,o.__v)}})}function Fe(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:ae(n)?n.map(Fe):H({},n)}function lt(n,t,r,a,o,l,s,c,d){var u,m,i,h,f,b,w,y=r.props||G,x=t.props,p=t.type;if(p=="svg"?o="http://www.w3.org/2000/svg":p=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),l!=null){for(u=0;u<l.length;u++)if((f=l[u])&&"setAttribute"in f==!!p&&(p?f.localName==p:f.nodeType==3)){n=f,l[u]=null;break}}if(n==null){if(p==null)return document.createTextNode(x);n=document.createElementNS(o,p,x.is&&x),c&&(C.__m&&C.__m(t,l),c=!1),l=null}if(p==null)y===x||c&&n.data==x||(n.data=x);else{if(l=l&&re.call(n.childNodes),!c&&l!=null)for(y={},u=0;u<n.attributes.length;u++)y[(f=n.attributes[u]).name]=f.value;for(u in y)if(f=y[u],u!="children"){if(u=="dangerouslySetInnerHTML")i=f;else if(!(u in x)){if(u=="value"&&"defaultValue"in x||u=="checked"&&"defaultChecked"in x)continue;Q(n,u,null,f,o)}}for(u in x)f=x[u],u=="children"?h=f:u=="dangerouslySetInnerHTML"?m=f:u=="value"?b=f:u=="checked"?w=f:c&&typeof f!="function"||y[u]===f||Q(n,u,f,y[u],o);if(m)c||i&&(m.__html==i.__html||m.__html==n.innerHTML)||(n.innerHTML=m.__html),t.__k=[];else if(i&&(n.innerHTML=""),Ie(t.type=="template"?n.content:n,ae(h)?h:[h],t,r,a,p=="foreignObject"?"http://www.w3.org/1999/xhtml":o,l,s,l?l[0]:r.__k&&q(r,0),c,d),l!=null)for(u=l.length;u--;)pe(l[u]);c||(u="value",p=="progress"&&b==null?n.removeAttribute("value"):b!=null&&(b!==n[u]||p=="progress"&&!b||p=="option"&&b!=y[u])&&Q(n,u,b,y[u],o),u="checked",w!=null&&w!=n[u]&&Q(n,u,w,y[u],o))}return n}function _e(n,t,r){try{if(typeof n=="function"){var a=typeof n.__u=="function";a&&n.__u(),a&&t==null||(n.__u=n(t))}else n.current=t}catch(o){C.__e(o,r)}}function We(n,t,r){var a,o;if(C.unmount&&C.unmount(n),(a=n.ref)&&(a.current&&a.current!=n.__e||_e(a,null,t)),(a=n.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(l){C.__e(l,t)}a.base=a.__P=null}if(a=n.__k)for(o=0;o<a.length;o++)a[o]&&We(a[o],t,r||typeof n.type!="function");r||pe(n.__e),n.__c=n.__=n.__e=void 0}function ot(n,t,r){return this.constructor(n,r)}function st(n,t,r){var a,o,l,s;t==document&&(t=document.documentElement),C.__&&C.__(n,t),o=(a=!1)?null:t.__k,l=[],s=[],he(t,n=t.__k=nt(U,null,[n]),o||G,G,t.namespaceURI,o?null:t.firstChild?re.call(t.childNodes):null,l,o?o.__e:t.firstChild,a,s),Ue(l,n,s)}re=Le.slice,C={__e:function(n,t,r,a){for(var o,l,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((l=o.constructor)&&l.getDerivedStateFromError!=null&&(o.setState(l.getDerivedStateFromError(n)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(n,a||{}),s=o.__d),s)return o.__E=o}catch(c){n=c}throw n}},De=0,ee.prototype.setState=function(n,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=H({},this.state),typeof n=="function"&&(n=n(H({},r),this.props)),n&&H(r,n),n!=null&&this.__v&&(t&&this._sb.push(t),be(this))},ee.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),be(this))},ee.prototype.render=U,B=[],Ae=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Oe=function(n,t){return n.__v.__b-t.__v.__b},ne.__r=0,He=/(PointerCapture)$|Capture$/i,me=0,oe=xe(!1),se=xe(!0);var ct=0;function e(n,t,r,a,o,l){t||(t={});var s,c,d=t;if("ref"in d)for(c in d={},t)c=="ref"?s=t[c]:d[c]=t[c];var u={type:n,props:d,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ct,__i:-1,__u:0,__source:o,__self:l};if(typeof n=="function"&&(s=n.defaultProps))for(c in s)d[c]===void 0&&(d[c]=s[c]);return C.vnode&&C.vnode(u),u}var V,P,le,we,K=0,Re=[],j=C,Ne=j.__b,ke=j.__r,Ce=j.diffed,Se=j.__c,Pe=j.unmount,je=j.__;function fe(n,t){j.__h&&j.__h(P,n,K||t),K=0;var r=P.__H||(P.__H={__:[],__h:[]});return n>=r.__.length&&r.__.push({}),r.__[n]}function v(n){return K=1,it(Je,n)}function it(n,t,r){var a=fe(V++,2);if(a.t=n,!a.__c&&(a.__=[Je(void 0,t),function(c){var d=a.__N?a.__N[0]:a.__[0],u=a.t(d,c);d!==u&&(a.__N=[u,a.__[1]],a.__c.setState({}))}],a.__c=P,!P.__f)){var o=function(c,d,u){if(!a.__c.__H)return!0;var m=a.__c.__H.__.filter(function(h){return!!h.__c});if(m.every(function(h){return!h.__N}))return!l||l.call(this,c,d,u);var i=a.__c.props!==c;return m.forEach(function(h){if(h.__N){var f=h.__[0];h.__=h.__N,h.__N=void 0,f!==h.__[0]&&(i=!0)}}),l&&l.call(this,c,d,u)||i};P.__f=!0;var l=P.shouldComponentUpdate,s=P.componentWillUpdate;P.componentWillUpdate=function(c,d,u){if(this.__e){var m=l;l=void 0,o(c,d,u),l=m}s&&s.call(this,c,d,u)},P.shouldComponentUpdate=o}return a.__N||a.__}function ge(n,t){var r=fe(V++,3);!j.__s&&ze(r.__H,t)&&(r.__=n,r.u=t,P.__H.__h.push(r))}function Te(n){return K=5,qe(function(){return{current:n}},[])}function qe(n,t){var r=fe(V++,7);return ze(r.__H,t)&&(r.__=n(),r.__H=t,r.__h=n),r.__}function N(n,t){return K=8,qe(function(){return n},t)}function dt(){for(var n;n=Re.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(te),n.__H.__h.forEach(ie),n.__H.__h=[]}catch(t){n.__H.__h=[],j.__e(t,n.__v)}}j.__b=function(n){P=null,Ne&&Ne(n)},j.__=function(n,t){n&&t.__k&&t.__k.__m&&(n.__m=t.__k.__m),je&&je(n,t)},j.__r=function(n){ke&&ke(n),V=0;var t=(P=n.__c).__H;t&&(le===P?(t.__h=[],P.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(te),t.__h.forEach(ie),t.__h=[],V=0)),le=P},j.diffed=function(n){Ce&&Ce(n);var t=n.__c;t&&t.__H&&(t.__H.__h.length&&(Re.push(t)!==1&&we===j.requestAnimationFrame||((we=j.requestAnimationFrame)||ut)(dt)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),le=P=null},j.__c=function(n,t){t.some(function(r){try{r.__h.forEach(te),r.__h=r.__h.filter(function(a){return!a.__||ie(a)})}catch(a){t.some(function(o){o.__h&&(o.__h=[])}),t=[],j.__e(a,r.__v)}}),Se&&Se(n,t)},j.unmount=function(n){Pe&&Pe(n);var t,r=n.__c;r&&r.__H&&(r.__H.__.forEach(function(a){try{te(a)}catch(o){t=o}}),r.__H=void 0,t&&j.__e(t,r.__v))};var $e=typeof requestAnimationFrame=="function";function ut(n){var t,r=function(){clearTimeout(a),$e&&cancelAnimationFrame(t),setTimeout(n)},a=setTimeout(r,35);$e&&(t=requestAnimationFrame(r))}function te(n){var t=P,r=n.__c;typeof r=="function"&&(n.__c=void 0,r()),P=t}function ie(n){var t=P;n.__c=n.__(),P=t}function ze(n,t){return!n||n.length!==t.length||t.some(function(r,a){return r!==n[a]})}function Je(n,t){return typeof t=="function"?t(n):t}const de="/api";async function k(n,t){return(await fetch(`${de}${n}`,{...t,headers:{"Content-Type":"application/json",...t?.headers}})).json()}function mt(){const[n,t]=v(null),[r,a]=v(!1),o=N(async()=>{a(!0);try{const c=await k("/board");t(c)}finally{a(!1)}},[]),l=N(async c=>{await k("/task",{method:"POST",body:JSON.stringify(c)}),await o()},[o]),s=N(async(c,d)=>{await k(`/task/${c}/move`,{method:"POST",body:JSON.stringify({status:d})}),await o()},[o]);return{board:n,loading:r,refresh:o,createTask:l,moveTask:s}}function pt(){const[n,t]=v([]),[r,a]=v(!1),[o,l]=v(null),s=N(async()=>{const m=await k("/chat/history");t(m.messages||[])},[]),c=N(async m=>{const i={role:"user",content:m};t(f=>[...f,i]),a(!0);const h=new AbortController;l(h);try{const w={role:"assistant",content:(await(await fetch(`${de}/chat`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:m}),signal:h.signal})).json()).response};t(y=>[...y,w])}catch(f){if(f.name==="AbortError"){const b={role:"assistant",content:"*(Stopped)*"};t(w=>[...w,b])}else{const b={role:"error",content:"Error: Could not reach Claude"};t(w=>[...w,b])}}finally{a(!1),l(null)}},[]),d=N(()=>{o&&(o.abort(),fetch(`${de}/chat/stop`,{method:"POST"}).catch(()=>{}))},[o]),u=N(async()=>{await k("/chat/history",{method:"DELETE"}),t([])},[]);return{messages:n,loading:r,loadHistory:s,sendMessage:c,stopGeneration:d,clearHistory:u}}function ht(){const[n,t]=v([]),[r,a]=v(""),o=N(async()=>{const s=await k("/projects");t(s.projects||[]);const c=s.projects?.find(d=>d.current);c&&a(c.name)},[]),l=N(async s=>{const c=await k("/projects/switch",{method:"POST",body:JSON.stringify({path:s})});return c.success&&a(c.project),c.success},[]);return{projects:n,currentProject:r,load:o,switchProject:l}}function _t(){const[n,t]=v([]),r=N(async()=>{const d=await k("/claude/mcp");t(d.servers||[])},[]),a=N(async d=>{await k("/claude/mcp",{method:"POST",body:JSON.stringify(d)}),await r()},[r]),o=N(async(d,u)=>{await k(`/claude/mcp/${d}`,{method:"PUT",body:JSON.stringify(u)}),await r()},[r]),l=N(async(d,u)=>{await k(`/claude/mcp/${d}`,{method:"DELETE",body:JSON.stringify({scope:u})}),await r()},[r]),s=N(async(d,u,m)=>{await k(`/claude/mcp/${d}/toggle`,{method:"POST",body:JSON.stringify({scope:u,enabled:m})}),await r()},[r]),c=N(async(d,u)=>{try{return await k(`/claude/mcp/${d}?scope=${u}`)}catch{return null}},[]);return{servers:n,load:r,add:a,update:o,remove:l,toggle:s,getOne:c}}function ft(){const[n,t]=v([]),r=N(async()=>{const c=await k("/claude/skills");t(c.skills||[])},[]),a=N(async c=>{await k("/claude/skills",{method:"POST",body:JSON.stringify(c)}),await r()},[r]),o=N(async c=>(await k(`/claude/skills${c}`)).content||"",[]),l=N(async(c,d)=>{await k(`/claude/skills${c}`,{method:"PUT",body:JSON.stringify({content:d})}),await r()},[r]),s=N(async c=>{await k(`/claude/skills${c}`,{method:"DELETE"}),await r()},[r]);return{skills:n,load:r,create:a,getContent:o,updateContent:l,remove:s}}function gt(){const[n,t]=v([]),r=N(async()=>{const l=await k("/claude/tools");t(l.tools||[])},[]),a=N(async(l,s)=>{await k(`/claude/tools/${l}/toggle`,{method:"POST",body:JSON.stringify({enabled:s,scope:"project"})}),await r()},[r]),o=N(async l=>{try{return await k(`/claude/tools/${l}`)}catch{return null}},[]);return{tools:n,load:r,toggle:a,getDetails:o}}function yt(){const[n,t]=v([]),r=N(async()=>{const s=await k("/claude/hooks");t(s.hooks||[])},[]),a=N(async s=>{await k("/claude/hooks",{method:"POST",body:JSON.stringify(s)}),await r()},[r]),o=N(async(s,c)=>{await k("/claude/hooks",{method:"PUT",body:JSON.stringify({old_event:s.event,old_command:s.command,old_scope:s.scope,event:c.event,command:c.command,scope:c.scope})}),await r()},[r]),l=N(async(s,c,d)=>{await k("/claude/hooks",{method:"DELETE",body:JSON.stringify({event:s,command:c,scope:d})}),await r()},[r]);return{hooks:n,load:r,add:a,update:o,remove:l}}function bt(){const[n,t]=v("main"),r=N(async()=>{const a=await k("/git/branch");t(a.branch||"main")},[]);return{branch:n,loadBranch:r}}function vt(){return{ping:N(async()=>await k("/session/ping",{method:"POST"}),[])}}function xt(){const[n,t]=v([]),[r,a]=v(!1),o=N(async()=>{a(!0);try{const i=await(await fetch("/api/manager/projects")).json();t(i.projects||[])}catch(m){console.error("Failed to load managed projects:",m)}finally{a(!1)}},[]),l=N(async(m,i)=>{const f=await(await fetch("/api/manager/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:m,git_url:i})})).json();return f.success&&await o(),f},[o]),s=N(async m=>{const h=await(await fetch(`/api/manager/projects/${m}`,{method:"DELETE"})).json();return h.success&&await o(),h},[o]),c=N(async m=>{const h=await(await fetch(`/api/manager/projects/${m}/start`,{method:"POST"})).json();return await o(),h},[o]),d=N(async m=>{const h=await(await fetch(`/api/manager/projects/${m}/stop`,{method:"POST"})).json();return await o(),h},[o]),u=N(m=>{window.open(`/project/${m}/`,"_blank")},[]);return{managedProjects:n,loading:r,loadProjects:o,createProject:l,deleteProject:s,startProject:c,stopProject:d,openProject:u}}function wt(){const[n,t]=v(null),[r,a]=v(!1),[o,l]=v(null),s=N(async()=>{a(!0),l(null);try{const c=await fetch("/api/manager/health/system");if(!c.ok)throw new Error("Failed to fetch health");const d=await c.json();t(d)}catch(c){l(c.message)}finally{a(!1)}},[]);return{health:n,loading:r,error:o,refresh:s}}function Nt({task:n,onClick:t,onDragStart:r}){return e("div",{className:"bg-gray-700 rounded-lg p-3 cursor-pointer hover:bg-gray-600 active:bg-gray-500 transition-colors touch-manipulation",draggable:!0,onDragStart:a=>r(a,n.id),onClick:t,children:[e("div",{className:"flex items-start justify-between gap-2",children:[e("span",{className:"font-medium text-sm",children:n.name}),n.priority>50&&e("span",{className:"text-xs bg-red-500/20 text-red-400 px-1.5 py-0.5 rounded",children:"High"})]}),n.description&&e("p",{className:"text-xs text-gray-400 mt-1 line-clamp-2",children:n.description}),n.test_cases&&n.test_cases.length>0&&e("div",{className:"text-xs text-gray-500 mt-2",children:[n.test_cases.length," tests"]})]})}function O({isOpen:n,onClose:t,title:r,children:a}){return n?e("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:t,children:e("div",{className:"bg-gray-800 rounded-xl p-5 w-full max-w-md max-h-[90vh] overflow-y-auto",onClick:o=>o.stopPropagation(),children:[e("div",{className:"flex justify-between items-start mb-4",children:[e("h3",{className:"text-lg font-semibold",children:r}),e("button",{onClick:t,className:"text-gray-500 hover:text-gray-300 p-1 -mr-1",children:"✕"})]}),a]})}):null}function kt({isOpen:n,onClose:t,children:r}){return n?e("div",{className:"fixed inset-0 bg-black/50 flex items-end justify-center z-50",onClick:t,children:e("div",{className:"bg-gray-800 rounded-t-2xl w-full max-w-lg p-4 safe-bottom",onClick:a=>a.stopPropagation(),children:[e("div",{className:"w-12 h-1 bg-gray-600 rounded-full mx-auto mb-4"}),r]})}):null}const Ct=[{id:"pending",key:"todo",label:"To Do",color:"bg-gray-500"},{id:"in_progress",key:"in_progress",label:"In Progress",color:"bg-blue-500"},{id:"needs_review",key:"review",label:"Review",color:"bg-yellow-500"},{id:"passing",key:"done",label:"Done",color:"bg-green-500"}];function St({data:n,onMoveTask:t,onAddTask:r,onWorkOnTask:a}){const[o,l]=v(!1),[s,c]=v(null),[d,u]=v({name:"",description:"",testCases:""}),[m,i]=v(null),h=(p,g)=>{p.dataTransfer?.setData("taskId",g)},f=(p,g)=>{p.preventDefault(),i(g)},b=(p,g)=>{p.preventDefault(),i(null);const S=p.dataTransfer?.getData("taskId");S&&t(S,g)},w=p=>{p.preventDefault(),r({name:d.name,description:d.description,test_cases:d.testCases.split(`
`).filter(g=>g.trim()),priority:0}),u({name:"",description:"",testCases:""}),l(!1)},y=p=>n?.board?n.board[p]||[]:[],x=p=>y(p).length;return e("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e("div",{className:"flex-1 overflow-x-auto overflow-y-auto kanban-scroll p-4",children:e("div",{className:"flex md:grid md:grid-cols-4 gap-3 min-w-max md:min-w-0",children:Ct.map(p=>e("div",{className:`w-72 md:w-auto bg-gray-800 rounded-lg p-3 flex-shrink-0 ${m===p.id?"ring-2 ring-blue-500":""}`,onDragOver:g=>f(g,p.id),onDragLeave:()=>i(null),onDrop:g=>b(g,p.id),children:[e("h2",{className:"font-semibold text-gray-300 mb-3 flex items-center gap-2 text-sm",children:[e("span",{className:`w-2.5 h-2.5 ${p.color} rounded-full`}),p.label,e("span",{className:"text-xs bg-gray-700 px-2 py-0.5 rounded-full",children:x(p.key)})]}),e("div",{className:"space-y-2 min-h-[150px]",children:y(p.key).map(g=>e(Nt,{task:g,onClick:()=>c(g),onDragStart:h},g.id))})]},p.id))})}),e("div",{className:"p-4 border-t border-gray-700 flex-shrink-0 safe-bottom",children:e("button",{onClick:()=>l(!0),className:"w-full md:w-auto px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-500 active:bg-blue-700 text-sm font-medium",children:"+ Add Task"})}),e(O,{isOpen:o,onClose:()=>l(!1),title:"Add New Task",children:e("form",{onSubmit:w,children:[e("div",{className:"space-y-4",children:[e("div",{children:[e("label",{className:"block text-sm text-gray-400 mb-1",children:"Name"}),e("input",{type:"text",value:d.name,onInput:p=>u({...d,name:p.target.value}),required:!0,className:"w-full bg-gray-700 rounded-lg px-3 py-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e("div",{children:[e("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),e("textarea",{value:d.description,onInput:p=>u({...d,description:p.target.value}),rows:3,className:"w-full bg-gray-700 rounded-lg px-3 py-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e("div",{children:[e("label",{className:"block text-sm text-gray-400 mb-1",children:"Test Cases (one per line)"}),e("textarea",{value:d.testCases,onInput:p=>u({...d,testCases:p.target.value}),rows:3,placeholder:`Test case 1
Test case 2`,className:"w-full bg-gray-700 rounded-lg px-3 py-3 text-base focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),e("div",{className:"flex gap-2 mt-6",children:[e("button",{type:"button",onClick:()=>l(!1),className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),e("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-500",children:"Add"})]})]})}),e(O,{isOpen:!!s,onClose:()=>c(null),title:s?.name||"",children:s&&e(U,{children:[e("div",{className:"space-y-4",children:[e("div",{children:[e("label",{className:"text-xs text-gray-500",children:"Status"}),e("p",{className:"text-sm",children:s.status})]}),s.description&&e("div",{children:[e("label",{className:"text-xs text-gray-500",children:"Description"}),e("p",{className:"text-sm",children:s.description})]}),s.test_cases&&s.test_cases.length>0&&e("div",{children:[e("label",{className:"text-xs text-gray-500",children:"Test Cases"}),e("ul",{className:"text-sm list-disc list-inside",children:s.test_cases.map((p,g)=>e("li",{children:p},g))})]})]}),e("div",{className:"flex gap-2 mt-6",children:[e("button",{onClick:()=>c(null),className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Close"}),e("button",{onClick:()=>{a(s),c(null)},className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-500",children:"Work on this"})]})]})})]})}function Pt({messages:n,loading:t,branch:r,onSend:a,onStop:o,onClear:l,onShowAddTask:s}){const[c,d]=v(""),[u,m]=v(!1),i=Te(null),h=Te(null);ge(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[n]);const f=()=>{const p=h.current;p&&(p.style.height="auto",p.style.height=Math.min(p.scrollHeight,120)+"px")},b=()=>{const p=c.trim();!p||t||(a(p),d(""),h.current&&(h.current.style.height="auto"))},w=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),b())},y=p=>{a(p)},x=p=>{let g=p.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return g=g.replace(/```(\w*)\n?([\s\S]*?)```/g,(S,A,M)=>`<pre class="bg-gray-900 rounded p-3 my-2 overflow-x-auto text-xs font-mono"><code>${M.trim()}</code></pre>`),g=g.replace(/`([^`]+)`/g,'<code class="bg-gray-900 px-1.5 py-0.5 rounded text-xs font-mono">$1</code>'),g=g.replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>"),g=g.replace(/\*([^*]+)\*/g,"<em>$1</em>"),g=g.replace(/\n/g,"<br>"),g};return e("div",{className:"flex flex-col h-full",children:[e("div",{className:"bg-gray-800 rounded-xl mx-3 mt-3 p-3 flex items-center justify-between flex-shrink-0",children:[e("div",{className:"flex-1 min-w-0",children:e("p",{className:"text-sm text-gray-300 truncate",children:r})}),e("button",{onClick:()=>y("Create a PR for current changes"),className:"ml-2 px-3 py-1 text-sm font-medium hover:bg-gray-700 rounded",children:"View PR"}),e("button",{onClick:()=>m(!0),className:"ml-1 p-1.5 hover:bg-gray-700 rounded",children:e("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})})]}),e("div",{ref:i,className:"flex-1 overflow-y-auto p-4 space-y-3",children:[n.length===0?e("div",{className:"text-gray-500 text-sm text-center py-8",children:"Start a conversation with Claude"}):n.map((p,g)=>e("div",{className:p.role==="user"?"bg-blue-600 rounded-lg p-3 ml-4 md:ml-8":p.role==="error"?"bg-red-600/20 text-red-400 rounded-lg p-3":"bg-gray-700 rounded-lg p-3 mr-4 md:mr-8",children:e("div",{className:"text-sm chat-content",dangerouslySetInnerHTML:{__html:x(p.content)}})},g)),t&&e("div",{className:"bg-gray-700 rounded-lg p-3 mr-4 md:mr-8",children:e("div",{className:"flex gap-1",children:[e("span",{className:"w-2 h-2 bg-gray-400 rounded-full loading-dot"}),e("span",{className:"w-2 h-2 bg-gray-400 rounded-full loading-dot"}),e("span",{className:"w-2 h-2 bg-gray-400 rounded-full loading-dot"})]})})]}),e("div",{className:"p-3 flex-shrink-0 safe-bottom",children:e("div",{className:"bg-gray-800 rounded-xl p-3",children:[e("textarea",{ref:h,value:c,onInput:p=>{d(p.target.value),f()},onKeyDown:w,placeholder:"Add feedback...",rows:1,className:"w-full bg-transparent text-base focus:outline-none resize-none overflow-hidden",style:{minHeight:"24px",maxHeight:"120px"}}),e("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-700",children:[e("div",{className:"flex items-center gap-1",children:e("span",{className:"text-xs bg-gray-700 px-2 py-1 rounded-full text-gray-400",children:"StreetsDigital/vibes"})}),e("div",{className:"flex items-center gap-1",children:[e("button",{onClick:s,className:"p-2 hover:bg-gray-700 rounded-lg active:bg-gray-600",title:"Add task",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),e("button",{onClick:()=>y("/commit"),className:"p-2 hover:bg-gray-700 rounded-lg active:bg-gray-600",title:"Commit",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e("button",{onClick:()=>y("Create a pull request"),className:"p-2 hover:bg-gray-700 rounded-lg active:bg-gray-600",title:"Create PR",children:e("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),t?e("button",{onClick:o,className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 active:bg-red-700 ml-1",title:"Stop",children:e("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z",clipRule:"evenodd"})})}):e("button",{onClick:b,className:"p-2 bg-white text-gray-900 rounded-lg hover:bg-gray-200 active:bg-gray-300 ml-1",title:"Send",children:e("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:e("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"})})})]})]})]})}),e(kt,{isOpen:u,onClose:()=>m(!1),children:e("div",{className:"space-y-1",children:[e("button",{onClick:()=>{y("Summarize current tasks"),m(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg",children:"Summarize tasks"}),e("button",{onClick:()=>{y("What should I work on next?"),m(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg",children:"Suggest next task"}),e("button",{onClick:()=>{y("/verify"),m(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg",children:"Run quality checks"}),e("button",{onClick:()=>{y("Show git status"),m(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg",children:"Git status"}),e("button",{onClick:()=>{l(),m(!1)},className:"w-full text-left px-4 py-3 hover:bg-gray-700 rounded-lg text-red-400",children:"Clear chat history"}),e("button",{onClick:()=>m(!1),className:"w-full text-left px-4 py-3 text-gray-400 hover:bg-gray-700 rounded-lg",children:"Cancel"})]})})]})}function ue({checked:n,onChange:t,disabled:r}){return e("label",{className:"relative inline-flex items-center cursor-pointer",children:[e("input",{type:"checkbox",checked:n,onChange:a=>t(a.target.checked),disabled:r,className:"sr-only peer"}),e("div",{className:"w-9 h-5 bg-gray-600 peer-focus:ring-2 peer-focus:ring-blue-500 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-4 after:w-4 after:transition-all peer-checked:bg-blue-600"})]})}function jt(){const n=_t(),t=ft(),r=gt(),a=yt(),[o,l]=v(!1),[s,c]=v(!1),[d,u]=v(!1),[m,i]=v(null),[h,f]=v(null),[b,w]=v(null),[y,x]=v(null),[p,g]=v({name:"",command:"",args:"",scope:"project"}),[S,A]=v({name:"",description:"",trigger:"",solution:"",scope:"project"}),[M,E]=v({event:"PreToolUse",command:"",scope:"project"});ge(()=>{n.load(),t.load(),r.load(),a.load()},[]);const F=async _=>{_.preventDefault(),await n.add({name:p.name,command:p.command,args:p.args.split(" ").filter($=>$),scope:p.scope}),g({name:"",command:"",args:"",scope:"project"}),l(!1)},I=async _=>{const $=await n.getOne(_.name,_.scope);$&&i($)},z=async _=>{_.preventDefault(),m&&(await n.update(m.name,m),i(null))},D=async()=>{!m||!confirm(`Delete MCP server "${m.name}"?`)||(await n.remove(m.name,m.scope),i(null))},L=async _=>{_.preventDefault(),await t.create(S),A({name:"",description:"",trigger:"",solution:"",scope:"project"}),c(!1)},Ge=async _=>{const $=await t.getContent(_.file);f({skill:_,content:$})},Ve=async _=>{_.preventDefault(),h&&(await t.updateContent(h.skill.file,h.content),f(null))},Ke=async()=>{!h||!confirm(`Delete skill "${h.skill.name}"?`)||(await t.remove(h.skill.file),f(null))},Qe=async _=>{const $=await r.getDetails(_.name);$&&w($)},Xe=async _=>{_.preventDefault(),await a.add(M),E({event:"PreToolUse",command:"",scope:"project"}),u(!1)},Ye=_=>{x(_)},Ze=async()=>{!y||!confirm(`Delete hook "${y.event}"?`)||(await a.remove(y.event,y.command,y.scope),x(null))};return e("div",{className:"flex-1 overflow-y-auto",children:[e("div",{className:"p-4 border-b border-gray-700",children:[e("h2",{className:"font-semibold text-gray-300",children:"Claude Tools"}),e("p",{className:"text-xs text-gray-500",children:"MCP servers, skills, and settings"})]}),e(X,{title:"MCP Servers",onAdd:()=>l(!0),isEmpty:n.servers.length===0,emptyText:"No MCP servers configured",children:n.servers.map(_=>e(Me,{title:_.name,subtitle:`${_.scope} • ${_.command}`,checked:_.enabled,onToggle:$=>n.toggle(_.name,_.scope,$),onClick:()=>I(_)},`${_.scope}-${_.name}`))}),e(X,{title:"Skills",onAdd:()=>c(!0),isEmpty:t.skills.length===0,emptyText:"No skills created yet",children:t.skills.map(_=>e("div",{className:"p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700",onClick:()=>Ge(_),children:[e("div",{className:"text-sm font-medium",children:_.name}),e("div",{className:"text-xs text-gray-500",children:_.description||_.scope})]},_.file))}),e(X,{title:"Built-in Tools",isEmpty:r.tools.length===0,children:r.tools.map(_=>e(Me,{title:_.name,subtitle:_.description,checked:_.enabled,onToggle:$=>r.toggle(_.name,$),onClick:()=>Qe(_)},_.name))}),e(X,{title:"Hooks",onAdd:()=>u(!0),isEmpty:a.hooks.length===0,emptyText:"No hooks configured",children:a.hooks.map((_,$)=>e("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700",onClick:()=>Ye(_),children:[e("div",{className:"flex-1 min-w-0",children:[e("div",{className:"text-sm font-medium",children:_.event}),e("div",{className:"text-xs text-gray-500 truncate",children:[_.scope," • ",_.command]})]}),e("button",{onClick:et=>{et.stopPropagation(),a.remove(_.event,_.command,_.scope)},className:"ml-2 p-1 text-red-400 hover:text-red-300",children:e("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},$))}),e("div",{className:"p-4",children:[e("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Quick Actions"}),e("div",{className:"space-y-2",children:[e(Y,{onClick:()=>{},label:"Commit changes"}),e(Y,{onClick:()=>{},label:"Create PR"}),e(Y,{onClick:()=>{},label:"Run quality checks"}),e(Y,{onClick:()=>{},label:"Extract learnings"})]})]}),e(O,{isOpen:o,onClose:()=>l(!1),title:"Add MCP Server",children:e("form",{onSubmit:F,children:[e(J,{children:[e(T,{label:"Name",children:e("input",{type:"text",value:p.name,onInput:_=>g({...p,name:_.target.value}),required:!0,placeholder:"my-server",className:"form-input"})}),e(T,{label:"Command",children:e("input",{type:"text",value:p.command,onInput:_=>g({...p,command:_.target.value}),required:!0,placeholder:"npx",className:"form-input"})}),e(T,{label:"Arguments (space separated)",children:e("input",{type:"text",value:p.args,onInput:_=>g({...p,args:_.target.value}),placeholder:"-y @modelcontextprotocol/server-github",className:"form-input"})}),e(T,{label:"Scope",children:e("select",{value:p.scope,onChange:_=>g({...p,scope:_.target.value}),className:"form-input",children:[e("option",{value:"project",children:"Project"}),e("option",{value:"global",children:"Global"})]})})]}),e(W,{onCancel:()=>l(!1),submitLabel:"Add"})]})}),e(O,{isOpen:!!m,onClose:()=>i(null),title:"MCP Server",children:m&&e("form",{onSubmit:z,children:[e(J,{children:[e(T,{label:"Name",children:e("input",{type:"text",value:m.name,onInput:_=>i({...m,name:_.target.value}),className:"form-input"})}),e(T,{label:"Command",children:e("input",{type:"text",value:m.command,onInput:_=>i({...m,command:_.target.value}),className:"form-input"})}),e(T,{label:"Arguments",children:e("input",{type:"text",value:m.args.join(" "),onInput:_=>i({...m,args:_.target.value.split(" ").filter($=>$)}),className:"form-input"})}),e("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-sm text-gray-400",children:"Enabled"}),e(ue,{checked:m.enabled,onChange:_=>i({...m,enabled:_})})]}),e("div",{className:"text-xs text-gray-500",children:["Scope: ",m.scope]})]}),e(W,{onCancel:()=>i(null),onDelete:D,submitLabel:"Save"})]})}),e(O,{isOpen:s,onClose:()=>c(!1),title:"Create Skill",children:e("form",{onSubmit:L,children:[e(J,{children:[e(T,{label:"Name",children:e("input",{type:"text",value:S.name,onInput:_=>A({...S,name:_.target.value}),required:!0,placeholder:"fix-common-error",className:"form-input"})}),e(T,{label:"Description",children:e("input",{type:"text",value:S.description,onInput:_=>A({...S,description:_.target.value}),placeholder:"What this skill does",className:"form-input"})}),e(T,{label:"Trigger (when to use)",children:e("textarea",{value:S.trigger,onInput:_=>A({...S,trigger:_.target.value}),rows:2,placeholder:"When error X occurs...",className:"form-input"})}),e(T,{label:"Solution",children:e("textarea",{value:S.solution,onInput:_=>A({...S,solution:_.target.value}),rows:4,placeholder:"Steps to fix...",className:"form-input"})})]}),e(W,{onCancel:()=>c(!1),submitLabel:"Create"})]})}),e(O,{isOpen:!!h,onClose:()=>f(null),title:h?.skill.name||"",children:h&&e("form",{onSubmit:Ve,children:[e(J,{children:[e(T,{label:"Content",children:e("textarea",{value:h.content,onInput:_=>f({...h,content:_.target.value}),rows:12,className:"form-input font-mono text-sm"})}),e("div",{className:"text-xs text-gray-500",children:["Path: ",h.skill.file]})]}),e(W,{onCancel:()=>f(null),onDelete:Ke,submitLabel:"Save"})]})}),e(O,{isOpen:!!b,onClose:()=>w(null),title:b?.name||"",children:b&&e("div",{className:"space-y-4",children:[e("div",{children:[e("label",{className:"block text-sm text-gray-400 mb-1",children:"Description"}),e("p",{className:"text-sm",children:b.description})]}),e("div",{children:[e("label",{className:"block text-sm text-gray-400 mb-1",children:"Details"}),e("p",{className:"text-sm text-gray-300",children:b.details||"No additional details available."})]}),e("div",{className:"flex items-center justify-between p-3 bg-gray-700 rounded-lg",children:[e("span",{className:"text-sm",children:"Enabled"}),e(ue,{checked:b.enabled,onChange:_=>{r.toggle(b.name,_),w({...b,enabled:_})}})]}),b.denied_in&&e("div",{className:"text-xs text-yellow-400",children:["Disabled in ",b.denied_in," settings"]}),e("button",{onClick:()=>w(null),className:"w-full px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Close"})]})}),e(O,{isOpen:d,onClose:()=>u(!1),title:"Add Hook",children:e("form",{onSubmit:Xe,children:[e(J,{children:[e(T,{label:"Event",children:e("select",{value:M.event,onChange:_=>E({...M,event:_.target.value}),className:"form-input",children:[e("option",{value:"PreToolUse",children:"PreToolUse - Before tool runs"}),e("option",{value:"PostToolUse",children:"PostToolUse - After tool runs"}),e("option",{value:"Notification",children:"Notification - On notifications"}),e("option",{value:"Stop",children:"Stop - When Claude stops"})]})}),e(T,{label:"Command",children:e("input",{type:"text",value:M.command,onInput:_=>E({...M,command:_.target.value}),required:!0,placeholder:"npm run lint",className:"form-input"})}),e(T,{label:"Scope",children:e("select",{value:M.scope,onChange:_=>E({...M,scope:_.target.value}),className:"form-input",children:[e("option",{value:"project",children:"Project"}),e("option",{value:"global",children:"Global"})]})})]}),e(W,{onCancel:()=>u(!1),submitLabel:"Add"})]})}),e(O,{isOpen:!!y,onClose:()=>x(null),title:"Hook",children:y&&e("div",{className:"space-y-4",children:[e(T,{label:"Event",children:e("p",{className:"text-sm",children:y.event})}),e(T,{label:"Command",children:e("p",{className:"text-sm font-mono bg-gray-700 p-2 rounded",children:y.command})}),e(T,{label:"Scope",children:e("p",{className:"text-sm",children:y.scope})}),e(W,{onCancel:()=>x(null),onDelete:Ze,submitLabel:""})]})})]})}function X({title:n,onAdd:t,isEmpty:r,emptyText:a,children:o}){return e("div",{className:"p-4 border-b border-gray-700",children:[e("div",{className:"flex items-center justify-between mb-3",children:[e("h3",{className:"text-sm font-medium text-gray-400",children:n}),t&&e("button",{onClick:t,className:"text-xs px-2 py-1 bg-gray-700 rounded hover:bg-gray-600",children:"+ Add"})]}),e("div",{className:"space-y-2",children:r?e("div",{className:"text-sm text-gray-500",children:a}):o})]})}function Me({title:n,subtitle:t,checked:r,onToggle:a,onClick:o}){return e("div",{className:"flex items-center justify-between p-2 bg-gray-800 rounded-lg cursor-pointer hover:bg-gray-700",children:[e("div",{className:"flex-1 min-w-0",onClick:o,children:[e("div",{className:"text-sm font-medium truncate",children:n}),e("div",{className:"text-xs text-gray-500",children:t})]}),e("div",{onClick:l=>l.stopPropagation(),children:e(ue,{checked:r,onChange:a})})]})}function Y({onClick:n,label:t}){return e("button",{onClick:n,className:"w-full text-left px-3 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 text-sm",children:t})}function J({children:n}){return e("div",{className:"space-y-4",children:n})}function T({label:n,children:t}){return e("div",{children:[e("label",{className:"block text-sm text-gray-400 mb-1",children:n}),t]})}function W({onCancel:n,onDelete:t,submitLabel:r}){return e("div",{className:"flex gap-2 mt-6",children:[t&&e("button",{type:"button",onClick:t,className:"px-4 py-3 bg-red-600/20 text-red-400 rounded-lg hover:bg-red-600/30",children:"Delete"}),e("button",{type:"button",onClick:n,className:"flex-1 px-4 py-3 bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),r&&e("button",{type:"submit",className:"flex-1 px-4 py-3 bg-blue-600 rounded-lg hover:bg-blue-500",children:r})]})}function Tt(){const[n,t]=v("board"),[r,a]=v(!1),[o,l]=v(!1),s=mt(),c=pt(),d=ht(),u=bt(),m=vt(),i=xt(),h=wt();ge(()=>{s.refresh(),c.loadHistory(),d.load(),u.loadBranch(),i.loadProjects(),h.refresh(),f();const w=setInterval(s.refresh,1e4),y=setInterval(h.refresh,3e4);return()=>{clearInterval(w),clearInterval(y)}},[]);const f=async()=>{(await m.ping()).summary&&t("chat")},b=w=>{t("chat"),c.sendMessage(`Help me implement: ${w.name}

Description: ${w.description||"None"}

Test cases:
${w.test_cases?.join(`
`)||"None"}`)};return e("div",{className:"bg-gray-900 text-gray-100 min-h-screen flex flex-col",children:[e("header",{className:"bg-gray-800 border-b border-gray-700 px-4 py-3 flex-shrink-0",children:e("div",{className:"flex items-center justify-between",children:[e("div",{className:"flex items-center gap-2",children:[e("h1",{className:"text-lg font-bold text-blue-400",children:"⚡"}),e($t,{projects:d.projects,currentProject:d.currentProject,managedProjects:i.managedProjects,onSwitch:async w=>{await d.switchProject(w),s.refresh(),c.loadHistory(),u.loadBranch()},onOpenManaged:i.openProject,onNewProject:()=>a(!0)})]}),e("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-xs text-gray-400 hidden sm:inline",children:s.board?.stats?`${s.board.stats.passing}/${s.board.stats.total} complete (${s.board.stats.progress_percent}%)`:"Loading..."}),e("button",{onClick:()=>l(!0),className:`p-2 rounded-lg text-sm flex items-center gap-1 ${h.health?.status==="healthy"?"bg-green-600/20 text-green-400 hover:bg-green-600/30":h.health?.status==="warning"?"bg-yellow-600/20 text-yellow-400 hover:bg-yellow-600/30":h.health?.status==="critical"?"bg-red-600/20 text-red-400 hover:bg-red-600/30 animate-pulse":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,title:`System: ${h.health?.status||"loading"}`,children:[e("span",{className:`w-2 h-2 rounded-full ${h.health?.status==="healthy"?"bg-green-400":h.health?.status==="warning"?"bg-yellow-400":h.health?.status==="critical"?"bg-red-400":"bg-gray-400"}`}),e("span",{className:"hidden sm:inline text-xs",children:h.health?`${h.health.memory.percent}%`:"..."})]}),e("button",{onClick:s.refresh,className:"p-2 bg-gray-700 rounded-lg hover:bg-gray-600 active:bg-gray-500 text-sm",children:"↻"})]})]})}),e("div",{className:"md:hidden flex border-b border-gray-700 bg-gray-800 flex-shrink-0",children:[e(R,{active:n==="board",onClick:()=>t("board"),label:"Board"}),e(R,{active:n==="chat",onClick:()=>t("chat"),label:"Claude"}),e(R,{active:n==="tools",onClick:()=>t("tools"),label:"Tools"})]}),e("div",{className:"hidden md:flex border-b border-gray-700 bg-gray-800 flex-shrink-0 justify-center",children:[e(R,{active:n==="board",onClick:()=>t("board"),label:"Board"}),e(R,{active:n==="chat",onClick:()=>t("chat"),label:"Claude"}),e(R,{active:n==="tools",onClick:()=>t("tools"),label:"Tools"})]}),e("div",{className:"flex flex-1 overflow-hidden",children:[e("main",{className:`flex-1 flex flex-col overflow-hidden ${n!=="board"?"hidden":"flex"}`,children:e(St,{data:s.board,onMoveTask:s.moveTask,onAddTask:s.createTask,onWorkOnTask:b})}),e("aside",{className:`w-full flex-1 bg-gray-900 flex-col h-full ${n!=="chat"?"hidden":"flex"}`,children:e(Pt,{messages:c.messages,loading:c.loading,branch:u.branch,onSend:c.sendMessage,onStop:c.stopGeneration,onClear:c.clearHistory,onShowAddTask:()=>t("board")})}),e("aside",{className:`w-full flex-1 bg-gray-900 flex-col h-full overflow-y-auto ${n!=="tools"?"hidden":"flex"}`,children:e(jt,{})})]}),e(Mt,{isOpen:r,onClose:()=>a(!1),onCreate:async(w,y)=>{const x=await i.createProject(w,y);x.success&&x.project&&i.openProject(x.project.id)}}),e(Dt,{isOpen:o,onClose:()=>l(!1),health:h.health,onRefresh:h.refresh})]})}function $t({projects:n,currentProject:t,managedProjects:r,onSwitch:a,onOpenManaged:o,onNewProject:l}){const[s,c]=v(!1);return e("div",{className:"relative",children:[e("button",{onClick:()=>c(!s),className:"flex items-center gap-1 px-2 py-1 bg-gray-700 rounded-lg hover:bg-gray-600 text-sm",children:[e("span",{children:t||"vibes"}),e("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&e("div",{className:"absolute left-0 mt-1 w-64 bg-gray-800 border border-gray-700 rounded-lg shadow-lg z-50",children:e("div",{className:"py-1 max-h-80 overflow-y-auto",children:[e("div",{className:"px-3 py-1 text-xs text-gray-500 uppercase",children:"Current"}),n.map(d=>e("button",{onClick:()=>{a(d.path),c(!1)},className:`w-full text-left px-3 py-2 hover:bg-gray-700 text-sm ${d.current?"text-blue-400":""}`,children:[d.current&&e("span",{className:"mr-1",children:"●"}),d.name]},d.path)),r.length>0&&e(U,{children:[e("div",{className:"border-t border-gray-700 my-1"}),e("div",{className:"px-3 py-1 text-xs text-gray-500 uppercase",children:"Isolated Projects"}),r.map(d=>e("button",{onClick:()=>{o(d.id),c(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-700 text-sm flex items-center justify-between",children:[e("span",{children:d.name}),e("span",{className:`text-xs px-1.5 py-0.5 rounded ${d.container_status==="running"?"bg-green-600/20 text-green-400":"bg-gray-600/20 text-gray-400"}`,children:d.container_status})]},d.id))]}),e("div",{className:"border-t border-gray-700 my-1"}),e("button",{onClick:()=>{l(),c(!1)},className:"w-full text-left px-3 py-2 hover:bg-gray-700 text-sm text-blue-400 flex items-center gap-2",children:[e("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Isolated Project"]})]})})]})}function Mt({isOpen:n,onClose:t,onCreate:r}){const[a,o]=v(""),[l,s]=v(""),[c,d]=v(!1),[u,m]=v(""),i=async()=>{if(!a.trim()){m("Project name is required");return}d(!0),m("");try{await r(a.trim(),l.trim()||void 0),o(""),s(""),t()}catch(h){m(h.message)}finally{d(!1)}};return n?e(O,{isOpen:n,onClose:t,title:"New Isolated Project",children:e("div",{className:"space-y-4",children:[e("p",{className:"text-sm text-gray-400",children:"Create a new project in its own isolated Docker container."}),e("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Project Name"}),e("input",{type:"text",value:a,onInput:h=>o(h.target.value),placeholder:"my-awesome-project",className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e("div",{children:[e("label",{className:"block text-sm font-medium mb-1",children:"Git URL (optional)"}),e("input",{type:"text",value:l,onInput:h=>s(h.target.value),placeholder:"https://github.com/user/repo.git",className:"w-full bg-gray-700 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),e("p",{className:"text-xs text-gray-500 mt-1",children:"Leave empty to create a blank project"})]}),u&&e("div",{className:"text-sm text-red-400 bg-red-400/10 rounded-lg px-3 py-2",children:u}),e("div",{className:"flex gap-2 justify-end",children:[e("button",{onClick:t,className:"px-4 py-2 text-sm bg-gray-700 rounded-lg hover:bg-gray-600",children:"Cancel"}),e("button",{onClick:i,disabled:c,className:"px-4 py-2 text-sm bg-blue-600 rounded-lg hover:bg-blue-500 disabled:opacity-50",children:c?"Creating...":"Create Project"})]})]})}):null}function Dt({isOpen:n,onClose:t,health:r,onRefresh:a}){if(!n)return null;const o={healthy:"text-green-400",warning:"text-yellow-400",critical:"text-red-400",error:"text-red-400"},l=({percent:s,color:c})=>e("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e("div",{className:`h-2 rounded-full ${c}`,style:{width:`${Math.min(s,100)}%`}})});return e(O,{isOpen:n,onClose:t,title:"System Health",children:e("div",{className:"space-y-4",children:r?e(U,{children:[e("div",{className:"flex items-center justify-between",children:[e("span",{className:`text-lg font-bold ${o[r.status]}`,children:r.status.toUpperCase()}),e("button",{onClick:a,className:"text-xs text-gray-400 hover:text-white",children:"Refresh"})]}),r.warnings.length>0&&e("div",{className:"bg-yellow-600/10 border border-yellow-600/30 rounded-lg p-3",children:[e("div",{className:"text-yellow-400 text-sm font-medium mb-1",children:"Warnings"}),r.warnings.map((s,c)=>e("div",{className:"text-yellow-300/80 text-xs",children:s},c))]}),e("div",{children:[e("div",{className:"flex justify-between text-sm mb-1",children:[e("span",{children:"CPU"}),e("span",{className:"text-gray-400",children:[r.cpu.percent,"% (",r.cpu.cores," cores)"]})]}),e(l,{percent:r.cpu.percent,color:r.cpu.percent>80?"bg-red-500":r.cpu.percent>60?"bg-yellow-500":"bg-green-500"}),e("div",{className:"text-xs text-gray-500 mt-1",children:["Load: ",r.cpu.load_1m," / ",r.cpu.load_5m," / ",r.cpu.load_15m]})]}),e("div",{children:[e("div",{className:"flex justify-between text-sm mb-1",children:[e("span",{children:"Memory"}),e("span",{className:"text-gray-400",children:[r.memory.used_gb,"GB / ",r.memory.total_gb,"GB (",r.memory.percent,"%)"]})]}),e(l,{percent:r.memory.percent,color:r.memory.percent>85?"bg-red-500":r.memory.percent>70?"bg-yellow-500":"bg-green-500"})]}),e("div",{children:[e("div",{className:"flex justify-between text-sm mb-1",children:[e("span",{children:"Disk"}),e("span",{className:"text-gray-400",children:[r.disk.used_gb,"GB / ",r.disk.total_gb,"GB (",r.disk.percent,"%)"]})]}),e(l,{percent:r.disk.percent,color:r.disk.percent>90?"bg-red-500":r.disk.percent>80?"bg-yellow-500":"bg-green-500"})]}),e("div",{children:[e("div",{className:"flex justify-between text-sm mb-2",children:[e("span",{children:"Containers"}),e("span",{className:"text-gray-400",children:[r.containers.running," / ",r.containers.total," running"]})]}),e("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:r.containers.list.map((s,c)=>e("div",{className:"flex items-center justify-between text-xs bg-gray-800 rounded px-2 py-1",children:[e("span",{className:"truncate",children:s.name}),e("span",{className:`px-1.5 py-0.5 rounded ${s.status==="running"?"bg-green-600/20 text-green-400":"bg-gray-600/20 text-gray-400"}`,children:s.status})]},c))})]}),e("div",{className:"text-xs text-gray-500 text-center",children:["Last updated: ",new Date(r.timestamp).toLocaleTimeString()]})]}):e("div",{className:"text-center py-4 text-gray-400",children:"Loading..."})})})}function R({active:n,onClick:t,label:r}){return e("button",{onClick:t,className:`flex-1 py-3 text-sm font-medium text-center ${n?"tab-active text-blue-400":"text-gray-400"}`,children:r})}st(e(Tt,{}),document.getElementById("app"));
